var Xh=Object.defineProperty;var Yh=(At,Ht,Ft)=>Ht in At?Xh(At,Ht,{enumerable:!0,configurable:!0,writable:!0,value:Ft}):At[Ht]=Ft;var w=(At,Ht,Ft)=>(Yh(At,typeof Ht!="symbol"?Ht+"":Ht,Ft),Ft);import{_ as Qh}from"../../chunks/preload-helper-41c905a7.js";import{S as Nr,i as Br,s as Lr,d as Qt,G as Ra,H as Ma,v as _r,I as Dr,J as Ha,n as b,c as P,x as H,p as v,q as A,l as S,f as N,y as F,r as f,K as hr,w as E,g as fr,L as p,M as Fa,N as Ka,z as ja,O as qe,P as tf,u as za,A as es,B as rs,C as ns,k as Le,t as Ze,D as ss,b as ef,Q as rf,R as nf,T as sf,F as af,U as of,e as Va,j as cf,o as qa,E as Za,V as lf,W as uf,X as hf,h as ff}from"../../chunks/index-5ed75e4c.js";import{_ as df,s as Mt}from"../../chunks/__vite-browser-external-bbc5d1cf.js";let Wa,pf=(async()=>{const At=""+new URL("../../assets/logo-white-68f65e57.jpeg",import.meta.url).href;function Ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available")}function Ft(t){if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Non array buffer passed to arrayBufferToUint8")}function Ja(t,e,r){return r?`Use of '${r}' requires \`${e}\` which is unavailable on the '${t}' object within the currently executing environment.`:`\`${e}\` is unavailable on the '${t}' object within the currently executing environment.`}function be(t,{throwIfUnavailable:e,usageDesc:r,returnEmptyObject:n}={}){let s;try{if(s=Ht(),s){let i=s[t];if(i)return i}}catch(i){console.error(`Error getting object '${t}' from global scope '${s}': ${i}`)}if(e){let i=Ja(s,t.toString(),r);throw console.error(i),new Error(i)}if(n)return{}}function vt(t){let e=t.reduce((s,i)=>s+i.length,0),r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++)r.set(t[s],n),n+=t[s].length;return r}function _e(t){return typeof t=="object"&&(t=Uint8Array.from(t)),t}function Ga(t){var e;return t!==null&&typeof t=="object"&&((e=t==null?void 0:t.constructor)==null?void 0:e.wordSize)===26&&Array.isArray(t==null?void 0:t.words)}function ct(t){return new TextEncoder().encode(t)}function Xa(t){return new TextDecoder().decode(t)}var is=new Array(255);for(let t=0;t<=255;++t)is[t]=t.toString(16).padStart(2,"0");function tt(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error(`hexToBytes: received invalid unpadded hex, got: ${t.length}`);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}function M(t){let e=new Array(t.length);for(let r=0;r<t.length;++r)e[r]=is[t[r]];return e.join("")}function We(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}var Je=(t,e=8)=>(typeof t=="bigint"?t:Mr(t,!1)).toString(16).padStart(e*2,"0"),Ya=t=>JSON.parse(Xa(tt(t))),Qa=t=>typeof t=="string"?tt(t):t,Rr=t=>t.startsWith("0x")?t.replace("0x",""):t,as=BigInt(0),St=BigInt(1);function to(t,e=128){if(t<-(St<<BigInt(e)-St)||t>(St<<BigInt(e)-St)-St)throw`Integer out of range given ${e} bits to represent.`;return t>=as?t:~(-t-St|~((St<<BigInt(e))-St))}function eo(t,e=128){return(t&St<<BigInt(e)-St)>as&&(t=t-(St<<BigInt(e))),t}function ro(t,e=!1,r=8){return tt(Je(Mr(t,e),r))}function Mr(t,e=!1){if(typeof t=="number"){if(!Number.isInteger(t))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");return BigInt(t)}if(typeof t=="string")if(t.toLowerCase().startsWith("0x")){let r=t.slice(2);r=r.padStart(r.length+r.length%2,"0"),t=tt(r)}else try{return BigInt(t)}catch(r){if(r instanceof SyntaxError)throw new RangeError(`Invalid value. String integer '${t}' is not finite.`)}if(typeof t=="bigint")return t;if(t instanceof Uint8Array)return e?eo(We(M(t))):We(M(t));if(Ga(t))return BigInt(t.toString());throw new TypeError(`Invalid value type. Must be a number, bigint, integer-string, hex-string, BN.js instance, or Buffer, got: ${typeof t}.`)}function no(t){return`[micro-stacks] ${t}`}var so=class extends Error{constructor(t){super(t),this.message=no(t),this.name=this.constructor.name}},io=typeof window<"u",ao=io?{referrer:"no-referrer",referrerPolicy:"no-referrer"}:{};async function ve(t,e={}){return fetch(t,{...ao,...e})}var os="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function co(t){let e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let r=t.indexOf("=");r===-1&&(r=e);let n=r===e?0:4-r%4;return[r,n]}function lo(t,e,r){return(e+r)*3/4-r}function uo(t,e){let{revLookup:r}=Fr(e),n,s=co(t),i=s[0],a=s[1],o=new Uint8Array(lo(t,i,a)),c=0,u=a>0?i-4:i,h;for(h=0;h<u;h+=4)n=r[t.charCodeAt(h)]<<18|r[t.charCodeAt(h+1)]<<12|r[t.charCodeAt(h+2)]<<6|r[t.charCodeAt(h+3)],o[c++]=n>>16&255,o[c++]=n>>8&255,o[c++]=n&255;return a===2&&(n=r[t.charCodeAt(h)]<<2|r[t.charCodeAt(h+1)]>>4,o[c++]=n&255),a===1&&(n=r[t.charCodeAt(h)]<<10|r[t.charCodeAt(h+1)]<<4|r[t.charCodeAt(h+2)]>>2,o[c++]=n>>8&255,o[c++]=n&255),o}function ho(t){let e=t.length,r=e%4;if(!r)return t;let n=4-r,s=e+n;return t.padEnd(s,"=")}function Ge(t){return uo(ho(t),os)}function fo(t,e){let{lookup:r}=Fr(e);return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[t&63]}function po(t,e,r,n){let s,i=[];for(let a=e;a<r;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(fo(s,n));return i.join("")}var Hr=new Map;function Fr(t){if(Hr.has(t))return Hr.get(t);let e=[],r=[];for(let n=0,s=t.length;n<s;++n)e[n]=t[n],r[t.charCodeAt(n)]=n;return r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63,Hr.set(t,{lookup:e,revLookup:r}),{lookup:e,revLookup:r}}function cs(t,e){let{lookup:r}=Fr(e),n,s=t.length,i=s%3,a=[],o=16383;for(let c=0,u=s-i;c<u;c+=o)a.push(po(t,c,c+o>u?u:c+o,e));return i===1?(n=t[s-1],a.push(r[n>>2]+r[n<<4&63]+"==")):i===2&&(n=(t[s-2]<<8)+t[s-1],a.push(r[n>>10]+r[n>>4&63]+r[n<<2&63]+"=")),a.join("")}function Kr(t){return cs(t,os)}function ls(t){return cs(t,oo)}var us="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",hs=BigInt(58);function go(t){if(t.length===0)return"";typeof t=="string"&&(typeof TextEncoder<"u"?t=new TextEncoder().encode(t):t=new Uint8Array(t.split("").map(n=>n.charCodeAt(0))));let e=BigInt("0x"+M(t)),r=[];for(;e>0;){let n=Number(e%hs);e=e/hs,r.push(us[n])}for(let n=0;t[n]===0;n++)r.push(us[0]);return r.reverse().join("")}function fs(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return new Uint8Array(e)}function dr(t,e,r,n,s){if(n||(n=0),!s&&s!==0&&(s=t.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||t.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=t.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>t.length&&(s=t.length),e.length-r<s-n&&(s=e.length-r+n);let i=s-n;return t===e&&typeof Uint8Array.prototype.copyWithin=="function"?t.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,t.subarray(n,s),r),i}var te=class{constructor(){w(this,"_value",[])}get value(){return this._value}appendHexString(t){this.value.push(tt(t))}push(t){return this._value.push(t)}appendByte(t){if(!Number.isInteger(t)||t<0||t>255)throw new Error(`Value ${t} is not a valid byte`);this.value.push(Uint8Array.from([t]))}concatBuffer(){return vt(this.value)}};function pr(t,e,r){return e=+e,r=r>>>0,t[r]=e&255,r+1}function yo(t,e,r){return e=+e,r=r>>>0,t[r]=e&255,t[r+1]=e>>>8,r+2}function jr(t,e,r){return e=+e,r>>>=0,t[r+3]=e>>>24,t[r+2]=e>>>16,t[r+1]=e>>>8,t[r]=e&255,r+4}function wo(t,e,r){return e=+e,r>>>=0,t[r]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e&255,r+4}function ds(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function mo(t,e){if(!ds(t,Uint8Array)||!ds(e,Uint8Array))throw new TypeError('The "buf1", "buf2" arguments must be one of type Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let s=0,i=Math.min(r,n);s<i;++s)if(t[s]!==e[s]){r=t[s],n=e[s];break}return r<n?-1:n<r?1:0}var ee=(t=>(t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet",t))(ee||{}),Xe=(t=>(t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet",t))(Xe||{});function zr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function bo(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function ps(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function vo(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zr(t.outputLen),zr(t.blockLen)}function So(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Eo(t,e){ps(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Se={number:zr,bool:bo,bytes:ps,hash:vo,exists:So,output:Eo},Vr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xt=(t,e)=>t<<32-e|t>>>e;if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gr(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function qr(t){if(typeof t=="string"&&(t=gr(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class Zr{clone(){return this._cloneInto()}}function Ye(t){const e=n=>t().update(qr(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Ao(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),o=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+u,o,n)}class Wr extends Zr{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Vr(this.buffer)}update(e){Se.exists(this);const{view:r,buffer:n,blockLen:s}=this;e=qr(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Vr(e);for(;s<=i-a;a+=s)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Se.exists(this),Se.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let c=a;c<s;c++)r[c]=0;Ao(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=Vr(e);this.get().forEach((c,u)=>o.setUint32(4*u,c,i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%r&&e.buffer.set(n),e}}const xo=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),gs=Uint8Array.from({length:16},(t,e)=>e),Io=gs.map(t=>(9*t+5)%16);let Jr=[gs],Gr=[Io];for(let t=0;t<4;t++)for(let e of[Jr,Gr])e.push(e[t].map(r=>xo[r]));const ys=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),ko=Jr.map((t,e)=>t.map(r=>ys[e][r])),$o=Gr.map((t,e)=>t.map(r=>ys[e][r])),To=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Co=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),yr=(t,e)=>t<<e|t>>>32-e;function ws(t,e,r,n){return t===0?e^r^n:t===1?e&r|~e&n:t===2?(e|~r)^n:t===3?e&n|r&~n:e^(r|~n)}const wr=new Uint32Array(16);class Oo extends Wr{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:r,h2:n,h3:s,h4:i}=this;return[e,r,n,s,i]}set(e,r,n,s,i){this.h0=e|0,this.h1=r|0,this.h2=n|0,this.h3=s|0,this.h4=i|0}process(e,r){for(let d=0;d<16;d++,r+=4)wr[d]=e.getUint32(r,!0);let n=this.h0|0,s=n,i=this.h1|0,a=i,o=this.h2|0,c=o,u=this.h3|0,h=u,l=this.h4|0,y=l;for(let d=0;d<5;d++){const m=4-d,g=To[d],I=Co[d],C=Jr[d],$=Gr[d],k=ko[d],L=$o[d];for(let U=0;U<16;U++){const q=yr(n+ws(d,i,o,u)+wr[C[U]]+g,k[U])+l|0;n=l,l=u,u=yr(o,10)|0,o=i,i=q}for(let U=0;U<16;U++){const q=yr(s+ws(m,a,c,h)+wr[$[U]]+I,L[U])+y|0;s=y,y=h,h=yr(c,10)|0,c=a,a=q}}this.set(this.h1+o+h|0,this.h2+u+y|0,this.h3+l+s|0,this.h4+n+a|0,this.h0+i+c|0)}roundClean(){wr.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const ms=Ye(()=>new Oo),Uo=(t,e,r)=>t&e^~t&r,Po=(t,e,r)=>t&e^t&r^e&r,No=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),re=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ne=new Uint32Array(64);class Bo extends Wr{constructor(){super(64,32,8,!1),this.A=re[0]|0,this.B=re[1]|0,this.C=re[2]|0,this.D=re[3]|0,this.E=re[4]|0,this.F=re[5]|0,this.G=re[6]|0,this.H=re[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:a,G:o,H:c}=this;return[e,r,n,s,i,a,o,c]}set(e,r,n,s,i,a,o,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,r){for(let l=0;l<16;l++,r+=4)ne[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){const y=ne[l-15],d=ne[l-2],m=xt(y,7)^xt(y,18)^y>>>3,g=xt(d,17)^xt(d,19)^d>>>10;ne[l]=g+ne[l-7]+m+ne[l-16]|0}let{A:n,B:s,C:i,D:a,E:o,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){const y=xt(o,6)^xt(o,11)^xt(o,25),d=h+y+Uo(o,c,u)+No[l]+ne[l]|0,m=(xt(n,2)^xt(n,13)^xt(n,22))+Po(n,s,i)|0;h=u,u=c,c=o,o=a+d|0,a=i,i=s,s=n,n=d+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,s,i,a,o,c,u,h)}roundClean(){ne.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const bs=Ye(()=>new Bo),mr=BigInt(2**32-1),Xr=BigInt(32);function vs(t,e=!1){return e?{h:Number(t&mr),l:Number(t>>Xr&mr)}:{h:Number(t>>Xr&mr)|0,l:Number(t&mr)|0}}function Lo(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=vs(t[s],e);[r[s],n[s]]=[i,a]}return[r,n]}const _o=(t,e)=>BigInt(t>>>0)<<Xr|BigInt(e>>>0),Do=(t,e,r)=>t>>>r,Ro=(t,e,r)=>t<<32-r|e>>>r,Mo=(t,e,r)=>t>>>r|e<<32-r,Ho=(t,e,r)=>t<<32-r|e>>>r,Fo=(t,e,r)=>t<<64-r|e>>>r-32,Ko=(t,e,r)=>t>>>r-32|e<<64-r,jo=(t,e)=>e,zo=(t,e)=>t,Vo=(t,e,r)=>t<<r|e>>>32-r,qo=(t,e,r)=>e<<r|t>>>32-r,Zo=(t,e,r)=>e<<r-32|t>>>64-r,Wo=(t,e,r)=>t<<r-32|e>>>64-r;function Jo(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const Go=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Xo=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Yo=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Qo=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,tc=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),ec=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,O={fromBig:vs,split:Lo,toBig:_o,shrSH:Do,shrSL:Ro,rotrSH:Mo,rotrSL:Ho,rotrBH:Fo,rotrBL:Ko,rotr32H:jo,rotr32L:zo,rotlSH:Vo,rotlSL:qo,rotlBH:Zo,rotlBL:Wo,add:Jo,add3L:Go,add3H:Xo,add4L:Yo,add4H:Qo,add5H:ec,add5L:tc},[rc,nc]=O.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),se=new Uint32Array(80),ie=new Uint32Array(80);class Yr extends Wr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:u,El:h,Fh:l,Fl:y,Gh:d,Gl:m,Hh:g,Hl:I}=this;return[e,r,n,s,i,a,o,c,u,h,l,y,d,m,g,I]}set(e,r,n,s,i,a,o,c,u,h,l,y,d,m,g,I){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=l|0,this.Fl=y|0,this.Gh=d|0,this.Gl=m|0,this.Hh=g|0,this.Hl=I|0}process(e,r){for(let k=0;k<16;k++,r+=4)se[k]=e.getUint32(r),ie[k]=e.getUint32(r+=4);for(let k=16;k<80;k++){const L=se[k-15]|0,U=ie[k-15]|0,q=O.rotrSH(L,U,1)^O.rotrSH(L,U,8)^O.shrSH(L,U,7),Z=O.rotrSL(L,U,1)^O.rotrSL(L,U,8)^O.shrSL(L,U,7),K=se[k-2]|0,_=ie[k-2]|0,j=O.rotrSH(K,_,19)^O.rotrBH(K,_,61)^O.shrSH(K,_,6),W=O.rotrSL(K,_,19)^O.rotrBL(K,_,61)^O.shrSL(K,_,6),rt=O.add4L(Z,W,ie[k-7],ie[k-16]),nt=O.add4H(rt,q,j,se[k-7],se[k-16]);se[k]=nt|0,ie[k]=rt|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:u,Dl:h,Eh:l,El:y,Fh:d,Fl:m,Gh:g,Gl:I,Hh:C,Hl:$}=this;for(let k=0;k<80;k++){const L=O.rotrSH(l,y,14)^O.rotrSH(l,y,18)^O.rotrBH(l,y,41),U=O.rotrSL(l,y,14)^O.rotrSL(l,y,18)^O.rotrBL(l,y,41),q=l&d^~l&g,Z=y&m^~y&I,K=O.add5L($,U,Z,nc[k],ie[k]),_=O.add5H(K,C,L,q,rc[k],se[k]),j=K|0,W=O.rotrSH(n,s,28)^O.rotrBH(n,s,34)^O.rotrBH(n,s,39),rt=O.rotrSL(n,s,28)^O.rotrBL(n,s,34)^O.rotrBL(n,s,39),nt=n&i^n&o^i&o,J=s&a^s&c^a&c;C=g|0,$=I|0,g=d|0,I=m|0,d=l|0,m=y|0,{h:l,l:y}=O.add(u|0,h|0,_|0,j|0),u=o|0,h=c|0,o=i|0,c=a|0,i=n|0,a=s|0;const Y=O.add3L(j,rt,J);n=O.add3H(Y,_,W,nt),s=Y|0}({h:n,l:s}=O.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=O.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=O.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l:h}=O.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:l,l:y}=O.add(this.Eh|0,this.El|0,l|0,y|0),{h:d,l:m}=O.add(this.Fh|0,this.Fl|0,d|0,m|0),{h:g,l:I}=O.add(this.Gh|0,this.Gl|0,g|0,I|0),{h:C,l:$}=O.add(this.Hh|0,this.Hl|0,C|0,$|0),this.set(n,s,i,a,o,c,u,h,l,y,d,m,g,I,C,$)}roundClean(){se.fill(0),ie.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class sc extends Yr{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class ic extends Yr{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const ac=Ye(()=>new Yr);Ye(()=>new sc),Ye(()=>new ic);function lt(t){return bs.create().update(_e(t)).digest()}function oc(t){return ac.create().update(_e(t)).digest()}const B=BigInt(0),z=BigInt(1),G=BigInt(2),Qe=BigInt(3),cc=BigInt(8),Qr=G**BigInt(256),V={a:B,b:BigInt(7),P:Qr-G**BigInt(32)-BigInt(977),n:Qr-BigInt("432420386565659656852420866394968145599"),h:z,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function Ss(t){const{a:e,b:r}=V,n=x(t*t),s=x(n*t);return x(s+e*t+r)}const br=V.a===B;class D{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof R))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new D(e.x,e.y,z)}static toAffineBatch(e){const r=fc(e.map(n=>n.z));return e.map((n,s)=>n.toAffine(r[s]))}static normalizeZ(e){return D.toAffineBatch(e).map(D.fromAffine)}equals(e){if(!(e instanceof D))throw new TypeError("JacobianPoint expected");const{x:r,y:n,z:s}=this,{x:i,y:a,z:o}=e,c=x(s**G),u=x(o**G),h=x(r*u),l=x(i*c),y=x(x(n*o)*u),d=x(x(a*s)*c);return h===l&&y===d}negate(){return new D(this.x,x(-this.y),this.z)}double(){const{x:e,y:r,z:n}=this,s=x(e**G),i=x(r**G),a=x(i**G),o=x(G*(x((e+i)**G)-s-a)),c=x(Qe*s),u=x(c**G),h=x(u-G*o),l=x(c*(o-h)-cc*a),y=x(G*r*n);return new D(h,l,y)}add(e){if(!(e instanceof D))throw new TypeError("JacobianPoint expected");const{x:r,y:n,z:s}=this,{x:i,y:a,z:o}=e;if(i===B||a===B)return this;if(r===B||n===B)return e;const c=x(s**G),u=x(o**G),h=x(r*u),l=x(i*c),y=x(x(n*o)*u),d=x(x(a*s)*c),m=x(l-h),g=x(d-y);if(m===B)return g===B?this.double():D.ZERO;const I=x(m**G),C=x(m*I),$=x(h*I),k=x(g**G-C-G*$),L=x(g*($-k)-y*C),U=x(s*o*m);return new D(k,L,U)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const r=D.ZERO;if(typeof e=="bigint"&&e===B)return r;let n=xs(e);if(n===z)return this;if(!br){let l=r,y=this;for(;n>B;)n&z&&(l=l.add(y)),y=y.double(),n>>=z;return l}let{k1neg:s,k1:i,k2neg:a,k2:o}=ks(n),c=r,u=r,h=this;for(;i>B||o>B;)i&z&&(c=c.add(h)),o&z&&(u=u.add(h)),h=h.double(),i>>=z,o>>=z;return s&&(c=c.negate()),a&&(u=u.negate()),u=new D(x(u.x*V.beta),u.y,u.z),c.add(u)}precomputeWindow(e){const r=br?128/e+1:256/e+1,n=[];let s=this,i=s;for(let a=0;a<r;a++){i=s,n.push(i);for(let o=1;o<2**(e-1);o++)i=i.add(s),n.push(i);s=i.double()}return n}wNAF(e,r){!r&&this.equals(D.BASE)&&(r=R.BASE);const n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=r&&tn.get(r);s||(s=this.precomputeWindow(n),r&&n!==1&&(s=D.normalizeZ(s),tn.set(r,s)));let i=D.ZERO,a=D.ZERO;const o=1+(br?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let y=0;y<o;y++){const d=y*c;let m=Number(e&u);if(e>>=l,m>c&&(m-=h,e+=z),m===0){let g=s[d];y%2&&(g=g.negate()),a=a.add(g)}else{let g=s[d+Math.abs(m)-1];m<0&&(g=g.negate()),i=i.add(g)}}return{p:i,f:a}}multiply(e,r){let n=xs(e),s,i;if(br){const{k1neg:a,k1:o,k2neg:c,k2:u}=ks(n);let{p:h,f:l}=this.wNAF(o,r),{p:y,f:d}=this.wNAF(u,r);a&&(h=h.negate()),c&&(y=y.negate()),y=new D(x(y.x*V.beta),y.y,y.z),s=h.add(y),i=l.add(d)}else{const{p:a,f:o}=this.wNAF(n,r);s=a,i=o}return D.normalizeZ([s,i])[0]}toAffine(e=Re(this.z)){const{x:r,y:n,z:s}=this,i=e,a=x(i*i),o=x(a*i),c=x(r*a),u=x(n*o);if(x(s*i)!==z)throw new Error("invZ was invalid");return new R(c,u)}}D.BASE=new D(V.Gx,V.Gy,z),D.ZERO=new D(B,z,B);const tn=new WeakMap;class R{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,tn.delete(this)}static fromCompressedHex(e){const r=e.length===32,n=It(r?e:e.subarray(1));if(!rn(n))throw new Error("Point is not on curve");const s=Ss(n);let i=hc(s);const a=(i&z)===z;r?a&&(i=x(-i)):(e[0]&1)===1!==a&&(i=x(-i));const o=new R(n,i);return o.assertValidity(),o}static fromUncompressedHex(e){const r=It(e.subarray(1,33)),n=It(e.subarray(33,65)),s=new R(r,n);return s.assertValidity(),s}static fromHex(e){const r=Ae(e),n=r.length,s=r[0];if(n===32||n===33&&(s===2||s===3))return this.fromCompressedHex(r);if(n===65&&s===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return R.BASE.multiply(oe(e))}static fromSignature(e,r,n){e=Ae(e);const s=$s(e),{r:i,s:a}=Us(r);if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid recovery bit");const o=n&1?"03":"02",c=R.fromHex(o+Ee(i)),{n:u}=V,h=Re(i,u),l=x(-s*h,u),y=x(a*h,u),d=R.BASE.multiplyAndAddUnsafe(c,l,y);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(e=!1){return ae(this.toHex(e))}toHex(e=!1){const r=Ee(this.x);return e?`${this.y&z?"03":"02"}${r}`:`04${r}${Ee(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:r,y:n}=this;if(!rn(r)||!rn(n))throw new Error(e);const s=x(n*n),i=Ss(r);if(x(s-i)!==B)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new R(this.x,x(-this.y))}double(){return D.fromAffine(this).double().toAffine()}add(e){return D.fromAffine(this).add(D.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return D.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,n){const s=D.fromAffine(this),i=r===B||r===z||this!==R.BASE?s.multiplyUnsafe(r):s.multiply(r),a=D.fromAffine(e).multiplyUnsafe(n),o=i.add(a);return o.equals(D.ZERO)?void 0:o.toAffine()}}R.BASE=new R(V.Gx,V.Gy),R.ZERO=new R(B,B);function Es(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function As(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${De(t)}`);const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:It(r),left:t.subarray(e+2)}}function lc(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${De(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=As(t.subarray(2)),{data:n,left:s}=As(r);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${De(s)}`);return{r:e,s:n}}class Kt{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){const r=er(e),n="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);const s=r?De(e):e;if(s.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new Kt(vr(s.slice(0,64)),vr(s.slice(64,128)))}static fromDER(e){const r=er(e);if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s}=lc(r?e:ae(e));return new Kt(n,s)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:r}=this;if(!nr(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!nr(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=V.n>>z;return this.s>e}normalizeS(){return this.hasHighS()?new Kt(this.r,V.n-this.s):this}toDERRawBytes(e=!1){return ae(this.toDERHex(e))}toDERHex(e=!1){const r=Es(rr(this.s));if(e)return r;const n=Es(rr(this.r)),s=rr(n.length/2),i=rr(r.length/2);return`30${rr(n.length/2+r.length/2+4)}02${s}${n}02${i}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return ae(this.toCompactHex())}toCompactHex(){return Ee(this.r)+Ee(this.s)}}function tr(...t){if(!t.every(er))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((n,s)=>n+s.length,0),r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}function er(t){return t instanceof Uint8Array}const uc=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function De(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=uc[t[r]];return e}function Ee(t){if(t>Qr)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function en(t){return ae(Ee(t))}function rr(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function vr(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function ae(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=r*2,s=t.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[r]=i}return e}function It(t){return vr(De(t))}function Ae(t){return t instanceof Uint8Array?Uint8Array.from(t):ae(t)}function xs(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&nr(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function x(t,e=V.P){const r=t%e;return r>=B?r:e+r}function mt(t,e){const{P:r}=V;let n=t;for(;e-- >B;)n*=n,n%=r;return n}function hc(t){const{P:e}=V,r=BigInt(6),n=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),o=BigInt(88),c=t*t*t%e,u=c*c*t%e,h=mt(u,Qe)*u%e,l=mt(h,Qe)*u%e,y=mt(l,G)*c%e,d=mt(y,n)*y%e,m=mt(d,s)*d%e,g=mt(m,a)*m%e,I=mt(g,o)*g%e,C=mt(I,a)*m%e,$=mt(C,Qe)*u%e,k=mt($,i)*d%e,L=mt(k,r)*c%e;return mt(L,G)}function Re(t,e=V.P){if(t===B||e<=B)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=x(t,e),n=e,s=B,i=z;for(;r!==B;){const a=n/r,o=n%r,c=s-i*a;n=r,r=o,s=i,i=c}if(n!==z)throw new Error("invert: does not exist");return x(s,e)}function fc(t,e=V.P){const r=new Array(t.length),n=t.reduce((i,a,o)=>a===B?i:(r[o]=i,x(i*a,e)),z),s=Re(n,e);return t.reduceRight((i,a,o)=>a===B?i:(r[o]=x(i*r[o],e),x(i*a,e)),s),r}const Is=(t,e)=>(t+e/G)/e,Sr=G**BigInt(128);function ks(t){const{n:e}=V,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-z*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,a=Is(i*t,e),o=Is(-n*t,e);let c=x(t-a*r-o*s,e),u=x(-a*n-o*i,e);const h=c>Sr,l=u>Sr;if(h&&(c=e-c),l&&(u=e-u),c>Sr||u>Sr)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:l,k2:u}}function $s(t){const{n:e}=V,r=t.length*8-256;let n=It(t);return r>0&&(n=n>>BigInt(r)),n>=e&&(n-=e),n}class Ts{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return ce.hmacSha256(this.k,...e)}hmacSync(...e){throw new Error("utils.hmacSha256Sync is undefined, you need to set it")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function nr(t){return B<t&&t<V.n}function rn(t){return B<t&&t<V.P}function Cs(t,e,r){const n=It(t);if(!nr(n))return;const{n:s}=V,i=R.BASE.multiply(n),a=x(i.x,s);if(a===B)return;const o=x(Re(n,s)*x(e+r*a,s),s);if(o===B)return;const c=new Kt(a,o),u=(i.x===c.r?0:2)|Number(i.y&z);return{sig:c,recovery:u}}function oe(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=vr(t)}else if(er(t)){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=It(t)}else throw new TypeError("Expected valid private key");if(!nr(e))throw new Error("Expected private key: 0 < key < n");return e}function Os(t){return t instanceof R?(t.assertValidity(),t):R.fromHex(t)}function Us(t){if(t instanceof Kt)return t.assertValidity(),t;try{return Kt.fromDER(t)}catch{return Kt.fromCompact(t)}}function kt(t,e=!1){return R.fromPrivateKey(t).toRawBytes(e)}function dc(t,e,r,n=!1){return R.fromSignature(t,e,r).toRawBytes(n)}function Ps(t){const e=er(t),r=typeof t=="string",n=(e||r)&&t.length;return e?n===33||n===65:r?n===66||n===130:t instanceof R}function Ns(t,e,r=!1){if(Ps(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!Ps(e))throw new TypeError("getSharedSecret: second arg must be public key");const n=Os(e);return n.assertValidity(),n.multiply(oe(t)).toRawBytes(r)}function Bs(t){const e=t.length>32?t.slice(0,32):t;return It(e)}function pc(t){const e=Bs(t),r=x(e,V.n);return Ls(r<B?e:r)}function Ls(t){if(typeof t!="bigint")throw new Error("Expected bigint");const e=Ee(t);return ae(e)}function _s(t,e,r){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const n=Ae(t),s=oe(e),i=[Ls(s),pc(n)];if(r!=null){r===!0&&(r=ce.randomBytes(32));const c=Ae(r);if(c.length!==32)throw new Error("sign: Expected 32 bytes of extra data");i.push(c)}const a=tr(...i),o=Bs(n);return{seed:a,m:o,d:s}}function Ds(t,e){let{sig:r,recovery:n}=t;const{canonical:s,der:i,recovered:a}=Object.assign({canonical:!0,der:!0},e);s&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const o=i?r.toDERRawBytes():r.toCompactRawBytes();return a?[o,n]:o}async function Rs(t,e,r={}){const{seed:n,m:s,d:i}=_s(t,e,r.extraEntropy);let a;const o=new Ts;for(await o.reseed(n);!(a=Cs(await o.generate(),s,i));)await o.reseed();return Ds(a,r)}function gc(t,e,r={}){const{seed:n,m:s,d:i}=_s(t,e,r.extraEntropy);let a;const o=new Ts;for(o.reseedSync(n);!(a=Cs(o.generateSync(),s,i));)o.reseedSync();return Ds(a,r)}const yc={strict:!0};function Er(t,e,r,n=yc){let s;try{s=Us(t),e=Ae(e)}catch{return!1}const{r:i,s:a}=s;if(n.strict&&s.hasHighS())return!1;const o=$s(e);let c;try{c=Os(r)}catch{return!1}const{n:u}=V,h=Re(a,u),l=x(o*h,u),y=x(i*h,u),d=R.BASE.multiplyAndAddUnsafe(c,l,y);return d?x(d.x,u)===i:!1}R.BASE._setWindowSize(8);const dt={node:df,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Ms={},ce={isValidPrivateKey(t){try{return oe(t),!0}catch{return!1}},privateAdd:(t,e)=>{const r=oe(t),n=oe(e);return en(x(r+n,V.n))},privateNegate:t=>{const e=oe(t);return en(V.n-e)},pointAddScalar:(t,e,r)=>{const n=R.fromHex(t),s=oe(e),i=R.BASE.multiplyAndAddUnsafe(n,s,z);if(!i)throw new Error("Tweaked point at infinity");return i.toRawBytes(r)},pointMultiply:(t,e,r)=>{const n=R.fromHex(t),s=It(Ae(e));return n.multiply(s).toRawBytes(r)},hashToPrivateKey:t=>{if(t=Ae(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=x(It(t),V.n-z)+z;return en(e)},randomBytes:(t=32)=>{if(dt.web)return dt.web.getRandomValues(new Uint8Array(t));if(dt.node){const{randomBytes:e}=dt.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>ce.hashToPrivateKey(ce.randomBytes(40)),bytesToHex:De,hexToBytes:ae,concatBytes:tr,mod:x,invert:Re,sha256:async(...t)=>{if(dt.web){const e=await dt.web.subtle.digest("SHA-256",tr(...t));return new Uint8Array(e)}else if(dt.node){const{createHash:e}=dt.node,r=e("sha256");return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(dt.web){const r=await dt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=tr(...e),s=await dt.web.subtle.sign("HMAC",r,n);return new Uint8Array(s)}else if(dt.node){const{createHmac:r}=dt.node,n=r("sha256",t);return e.forEach(s=>n.update(s)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=Ms[t];if(r===void 0){const n=await ce.sha256(Uint8Array.from(t,s=>s.charCodeAt(0)));r=tr(n,n),Ms[t]=r}return ce.sha256(r,...e)},taggedHashSync:(t,...e)=>{throw new Error("utils.sha256Sync is undefined, you need to set it")},precompute(t=8,e=R.BASE){const r=e===R.BASE?e:new R(e.x,e.y);return r._setWindowSize(t),r.multiply(Qe),r}};var wc=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),mc=class{constructor(t){w(this,"webCrypto");this.webCrypto=t}async encrypt(t,e,r,n){let s,i;if(t==="aes-128-cbc")s="AES-CBC",i=128;else if(t==="aes-256-cbc")s="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);let a=await this.webCrypto.subtle.importKey("raw",e,{name:s,length:i},!1,["encrypt"]),o=await this.webCrypto.subtle.encrypt({name:s,iv:r},a,n);return new Uint8Array(o)}async decrypt(t,e,r,n){let s,i;if(t==="aes-128-cbc")s="AES-CBC",i=128;else if(t==="aes-256-cbc")s="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);let a=await this.webCrypto.subtle.importKey("raw",e,{name:s,length:i},!1,["decrypt"]),o=await this.webCrypto.subtle.decrypt({name:s,iv:r},a,n);return new Uint8Array(o)}},bc=class{constructor(t,e){w(this,"createCipher");w(this,"createDecipher");this.createCipher=t,this.createDecipher=e}async encrypt(t,e,r,n){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);let s=this.createCipher(t,e,r),i=vt([s.update(n),s.final()]);return Promise.resolve(i)}async decrypt(t,e,r,n){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);let s=this.createDecipher(t,e,r),i=vt([s.update(n),s.final()]);return Promise.resolve(i)}};function vc(){return typeof crypto<"u"&&typeof crypto.subtle<"u"}var Sc='Crypto lib not found. Either the WebCrypto "crypto.subtle" or Node.js "crypto" module must be available.';async function Ec(){if(vc())return{lib:crypto,name:"webCrypto"};try{return{lib:wc("crypto"),name:"nodeCrypto"}}catch{throw new Error(Sc)}}async function Hs(){let t=await Ec();return t.name==="webCrypto"?new mc(t.lib):new bc(t.lib.createCipheriv,t.lib.createDecipheriv)}async function Ac(t,e,r){return(await Hs()).encrypt("aes-256-cbc",e,t,r)}async function xc(t,e,r){return(await Hs()).decrypt("aes-256-cbc",e,t,r)}class Fs extends Zr{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Se.hash(e);const n=qr(r);if(this.iHash=e.create(),!(this.iHash instanceof Zr))throw new TypeError("Expected instance of class which extends utils.Hash");const s=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const i=new Uint8Array(s);i.set(n.length>this.iHash.blockLen?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return Se.exists(this),this.iHash.update(e),this}digestInto(e){Se.exists(this),Se.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ks=(t,e,r)=>new Fs(t,e).update(r).digest();Ks.create=(t,e)=>new Fs(t,e);function js(t,...e){let r=Ks.create(bs,_e(t));for(let n of e)r.update(_e(n));return Uint8Array.from(r.digest())}function Ic(t){return(Math.floor(t/16)+1)*16}function kc(t){return Math.ceil(t/3)*4}function $c(t){let e={iv:"",ephemeralPK:"",mac:"",cipherText:"",wasString:!!t.wasString};t.cipherTextEncoding==="base64"&&(e.cipherTextEncoding="base64");let r=32,n=66,s=64;return{payloadValuesLength:r+n+s,payloadShell:JSON.stringify(e)}}function Tc(t){let e={signature:"",publicKey:"",cipherText:t};return{signedPayloadValuesLength:144+66,signedPayloadShell:JSON.stringify(e)}}function Cc(t){let{payloadShell:e,payloadValuesLength:r}=$c(t),n=Ic(t.contentLength),s;if(!t.cipherTextEncoding||t.cipherTextEncoding==="hex")s=n*2;else if(t.cipherTextEncoding==="base64")s=kc(n);else throw new Error(`Unexpected cipherTextEncoding "${t.cipherTextEncoding}"`);if(t.sign){let{signedPayloadShell:i,signedPayloadValuesLength:a}=Tc(e);return i.length+a+r+s}else return e.length+r+s}function Oc(t){return typeof t=="string"?ms(t):ms.create().update(_e(t)).digest()}var Uc=class{digest(t){return Oc(t)}};function Pc(){return new Uc}function nn(t){return Pc().digest(t)}function zs(t){let e=oc(t);return{encryptionKey:e.slice(0,32),hmacKey:e.slice(32)}}function sn(t=32){return ce.randomBytes(t)}function Vs(t,e){let r=new Uint8Array([e]),n=new Uint8Array(25),s=new Uint8Array(21);s[0]=e,s.set(t,1);let i=lt(s),a=lt(i).slice(0,4);return n.set(r,0),n.set(t,1),n.set(a,t.length+1),go(n)}var Nc={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},Bc={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},qs={bitcoin:Nc,testnet:Bc},Ar=(t=>(t[t.mainnetP2PKH=22]="mainnetP2PKH",t[t.mainnetP2SH=20]="mainnetP2SH",t[t.testnetP2PKH=26]="testnetP2PKH",t[t.testnetP2SH=21]="testnetP2SH",t))(Ar||{}),Me="0123456789ABCDEFGHJKMNPQRSTVWXYZ",an=new Map;[...Me].forEach((t,e)=>an.set(t,e));var xr="0123456789abcdef",on=new Map;[...xr].forEach((t,e)=>on.set(t,e));function sr(t,e){let r=Zs(t,e),n=Lc(vt([e,r]));return`S${Me[t]}${n}`}function Lc(t){let e=M(t),r=[],n=0;for(let o=e.length-1;o>=0;o--)if(n<4){let c=on.get(e[o])>>n,u=0;o!==0&&(u=on.get(e[o-1]));let h=1+n,l=u%(1<<h)<<5-h,y=Me[c+l];n=h,r.unshift(y)}else n=0;let s=0;for(let o=0;o<r.length&&r[o]==="0";o++)s++;r=r.slice(s);let i=/^\u0000*/.exec(new TextDecoder().decode(t)),a=i?i[0].length:0;for(let o=0;o<a;o++)r.unshift(Me[0]);return r.join("")}function Zs(t,e){let r=lt(vt([Uint8Array.of(t),e]));return lt(r).slice(0,4)}function ir(t){if(t.length<=5)throw new Error("Invalid c32 address: invalid length");if(t[0]!=="S")throw new Error('Invalid c32 address: must start with "S"');return _c(t.slice(1))}function _c(t){t=Ws(t);let e=Dc(t.slice(1)),r=t[0],n=an.get(r),s=e.slice(-4),i=Zs(n,e.slice(0,-4));for(let a=0;a<s.length;a++)if(s[a]!==i[a])throw new Error("Invalid c32check string: checksum mismatch");return[n,e.slice(0,-4)]}function Ws(t){return t.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}function Dc(t){if(t=Ws(t),!RegExp(`^[${Me}]*$`).exec(t))throw new Error("Not a c32-encoded string");let e=RegExp(`^${Me[0]}*`).exec(t),r=e?e[0].length:0,n=[],s=0,i=0;for(let c=t.length-1;c>=0;c--){i===4&&(n.unshift(xr[s]),i=0,s=0);let u=(an.get(t[c])<<i)+s,h=xr[u%16];if(i+=1,s=u>>4,s>1<<i)throw new Error("Panic error in decoding.");n.unshift(h)}n.unshift(xr[s]),n.length%2===1&&n.unshift("0");let a=0;for(let c=0;c<n.length&&n[c]==="0";c++)a++;n=n.slice(a-a%2);let o=n.join("");for(let c=0;c<r;c++)o=`00${o}`;return tt(o)}function Js(t){try{return ir(t),!0}catch{return!1}}function cn(t,e=22){return sr(e,Rc(Qa(t)))}function Gs(t){let e=kt(t,!0),r=lt(e),n=nn(r);return Vs(n,qs.bitcoin.pubKeyHash)}function ln(t){let e=typeof t=="string"?t:M(t),r=lt(tt(e)),n=nn(r);return Vs(n,qs.bitcoin.pubKeyHash)}function Rc(t){let e=lt(t);return nn(e)}async function un(t){let{contents:e,privateKey:r}=t,n=e instanceof ArrayBuffer?Ft(e):typeof e=="string"?ct(e):e,s=M(kt(r,!0)),i=lt(n),a=await Rs(i,r,{canonical:!1});return{signature:M(a),publicKey:s}}function Xs(t,e=!1){let{contents:r,publicKey:n,signature:s}=t,i=r instanceof ArrayBuffer?Ft(r):typeof r=="string"?ct(r):r,a=lt(i);return Er(s,a,n,{strict:e})}async function Mc(t){let{publicKey:e,content:r,cipherTextEncoding:n="hex",wasString:s}=t,i=ce.randomPrivateKey(),a=kt(i,!0),o=Ns(i,e,!0);o=o.slice(1);let c=zs(o),u=sn(16),h=await Ac(u,c.encryptionKey,r),l=vt([u,a,h]),y=js(c.hmacKey,l),d;if(!n||n==="hex")d=M(h);else if(n==="base64")d=Kr(h);else throw new Error(`Unexpected cipherTextEncoding "${n}"`);let m={iv:M(u),ephemeralPK:M(a),cipherText:d,mac:M(y),wasString:s};return n&&n!=="hex"&&(m.cipherTextEncoding=n),m}function Hc(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}async function Ys(t){let{privateKey:e,cipherObject:r}=t;if(!r.ephemeralPK)throw Error("No ephemeralPK found in cipher object");let n=r.ephemeralPK,s=Ns(e,n,!0);s=s.slice(1);let i=zs(s),a=tt(r.iv),o;if(!r.cipherTextEncoding||r.cipherTextEncoding==="hex")o=tt(r.cipherText);else if(r.cipherTextEncoding==="base64")o=Ge(r.cipherText);else throw new Error(`Unexpected cipherTextEncoding "${r.cipherText}"`);let c=vt([a,tt(n),o]),u=js(i.hmacKey,c),h=tt(r.mac);if(!Hc(h,u))throw new Error("Decryption failed: failure in MAC check");let l=await xc(a,i.encryptionKey,o);return r.wasString?new TextDecoder().decode(l):l}function hn(t,e){if(!e.privateKey)throw new Error("Private key is required for decryption.");try{let r=JSON.parse(t);return Ys({privateKey:e.privateKey,cipherObject:r})}catch(r){throw r instanceof SyntaxError?new Error("Failed to parse encrypted content JSON. The content may not be encrypted. If using getFile, try passing { decrypt: false }."):r}}async function Qs(t,e){let{publicKey:r,privateKey:n,wasString:s}=e,{cipherTextEncoding:i,sign:a}=e;if(!n&&!r)throw new Error("Either public key or private key must be supplied for encryption.");if(!r&&n&&(r=M(kt(n,!0))),typeof s!="boolean"&&(s=typeof t=="string"),!r)throw new Error("micro-stacks/crypto - no public key found to encrypt content");let o=typeof t=="string"?ct(t):t,c=await Mc({publicKey:r,content:o,wasString:s,cipherTextEncoding:i});if(!a)return JSON.stringify(c);if(typeof a=="string"&&(n=a),!n)throw new Error("micro-stacks/crypto - need private key to sign contents");let u=await un({contents:JSON.stringify(c),privateKey:n});return JSON.stringify({...u,cipherText:JSON.stringify(c)})}function Fc(t){let e=t.length,r=e%4;if(!r)return t;let n=4-r,s=e+n;return t.padEnd(s,"=")}function Kc(t){return t instanceof Uint8Array?ti(Kr(t)):ti(Kr(new TextEncoder().encode(t)))}function jc(t){let e=Ge(zc(t));return new TextDecoder().decode(e)}function zc(t){let e;return t instanceof Uint8Array?e=new TextDecoder().decode(t):e=t,Fc(e).replace(/\-/g,"+").replace(/_/g,"/")}function ti(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var jt={encode:Kc,decode:jc},Ir=128,ei=0,Vc=32,qc=16,Zc=2,ri=qc|Vc|ei<<6,kr=Zc|ei<<6;function ni(t){return typeof t=="string"?Ge(t):t}function si(t){let e=ni(t),r=32,n=r+1,s=e.length,i=0;if(e[i++]!==ri)throw new Error('Could not find expected "seq"');let a=e[i++];if(a===(Ir|1)&&(a=e[i++]),s-i<a)throw new Error('"seq" specified length of "'+a+'", only "'+(s-i)+'" remaining');if(e[i++]!==kr)throw new Error('Could not find expected "int" for "r"');let o=e[i++];if(s-i-2<o)throw new Error('"r" specified length of "'+o+'", only "'+(s-i-2)+'" available');if(n<o)throw new Error('"r" specified length of "'+o+'", max of "'+n+'" is acceptable');let c=i;if(i+=o,e[i++]!==kr)throw new Error('Could not find expected "int" for "s"');let u=e[i++];if(s-i!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(s-i)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');let h=i;if(i+=u,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');let l=r-o,y=r-u,d=new Uint8Array(l+o+y+u);for(i=0;i<l;++i)d[i]=0;d.set(e.slice(c+Math.max(-l,0),c+o),i),i=r;for(let m=i;i<m+y;++i)d[i]=0;return d.set(e.slice(h+Math.max(-y,0),h+u),i),ls(d).replace(/=/g,"")}function ii(t,e,r){let n=0;for(;e+n<r&&t[e+n]===0;)++n;return t[e+n]>=Ir&&--n,n}function ai(t){let e=ni(t),r=32,n=ii(e,0,r),s=ii(e,r,e.length),i=r-n,a=r-s,o=1+1+i+1+1+a,c=o<Ir,u=new Uint8Array((c?2:3)+o),h=0;return u[h++]=ri,c?u[h++]=o:(u[h++]=Ir|1,u[h++]=o&255),u[h++]=kr,u[h++]=i,n<0?(u[h++]=0,h+=dr(e,u,h,0,r)):h+=dr(e,u,h,n,r),u[h++]=kr,u[h++]=a,s<0?(u[h++]=0,dr(e,u,h,r)):dr(e,u,h,r+s),ls(u).replace(/=/g,"")}function fn(t,e){let r=[],n=jt.encode(JSON.stringify(e));r.push(n);let s=jt.encode(JSON.stringify(t));return r.push(s),r.join(".")}var dn=class{constructor(t="ES256K",e){w(this,"tokenType");w(this,"rawPrivateKey");if(!e)throw new so("TokenSigner: rawPrivateKey is required to sign a token");this.tokenType="JWT",this.rawPrivateKey=e}header(t={}){return{typ:this.tokenType,alg:"ES256K",...t}}async sign(t,e=!1,r={}){let n=this.header(r),s=fn(t,n),i=lt(ct(s));return this.createWithSignedHash(t,e,n,s,i)}signSync(t,e=!1,r={}){let n=this.header(r),s=fn(t,n),i=lt(ct(s));return this.createWithSignedHashSync(t,e,n,s,i)}async createWithSignedHash(t,e,r,n,s){let i=await Rs(s,this.rawPrivateKey,{canonical:!1}),a=si(i);return e?{header:[jt.encode(JSON.stringify(r))],payload:JSON.stringify(t),signature:[a]}:[n,a].join(".")}createWithSignedHashSync(t,e,r,n,s){let i=gc(s,this.rawPrivateKey,{canonical:!1}),a=si(i);return e?{header:[jt.encode(JSON.stringify(r))],payload:JSON.stringify(t),signature:[a]}:[n,a].join(".")}},Wc=class{constructor(t,e){w(this,"tokenType");w(this,"rawPublicKey");this.tokenType="JWT",this.rawPublicKey=e}verify(t,e=!1){return typeof t=="string"?this.verifyCompact(t,e):typeof t=="object"?this.verifyExpanded(t,e):!1}verifyCompact(t,e){let r=t.split("."),n=r[0]+"."+r[1],s=a=>{let o=r[2],c=ai(o);return Er(M(Ge(c)),M(a),this.rawPublicKey,{strict:e})},i=lt(ct(n));return s(i)}verifyExpanded(t,e){let r=[t.header.join("."),jt.encode(t.payload)].join("."),n=!0,s=a=>(t.signature.map(o=>{let c=ai(o);Er(M(Ge(c)),M(a),this.rawPublicKey,{strict:e})||(n=!1)}),n),i=lt(ct(r));return s(i)}};function pn(t){if(typeof t=="string"){let e=t.split("."),r=JSON.parse(jt.decode(e[0])),n=JSON.parse(jt.decode(e[1])),s=e[2];return{header:r,payload:n,signature:s}}else if(typeof t=="object"){if(typeof t.payload!="string")throw new Error("Expected token payload to be a base64 or json string");let e=t.payload;t.payload[0]!=="{"&&(e=jt.decode(e));let r=[];return t.header.map(n=>{let s=JSON.parse(jt.decode(n));r.push(s)}),{header:r,payload:JSON.parse(e),signature:t.signature}}}function Jc(t){return fn(t,{typ:"JWT",alg:"none"})+"."}var oi=BigInt("0xffffffffffffffffffffffffffffffff"),Gc=BigInt(0);BigInt("0x7fffffffffffffffffffffffffffffff"),BigInt("-170141183460469231731687303715884105728");var ci=(t=>(t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract",t))(ci||{}),Xc=(t=>(t[t.Int=0]="Int",t[t.UInt=1]="UInt",t[t.Buffer=2]="Buffer",t[t.BoolTrue=3]="BoolTrue",t[t.BoolFalse=4]="BoolFalse",t[t.PrincipalStandard=5]="PrincipalStandard",t[t.PrincipalContract=6]="PrincipalContract",t[t.ResponseOk=7]="ResponseOk",t[t.ResponseErr=8]="ResponseErr",t[t.OptionalNone=9]="OptionalNone",t[t.OptionalSome=10]="OptionalSome",t[t.List=11]="List",t[t.Tuple=12]="Tuple",t[t.StringASCII=13]="StringASCII",t[t.StringUTF8=14]="StringUTF8",t))(Xc||{}),Yc=t=>{let e=Mr(t);if(e<Gc)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(e>oi)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${oi.toString()}`);return{type:1,value:e}};function Qc(t){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(t)&&t.length<128}var tl=(t=>(t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.AssetInfo=4]="AssetInfo",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.TransactionAuthField=10]="TransactionAuthField",t))(tl||{});function li(t){return sr(t.version,tt(t.hash160))}var el=(t,e)=>t?ct(t).length>e:!1;function rl(t,e,r){let n=e||1,s=r||128;if(el(t,s))throw new Error(`String length exceeds maximum bytes ${s.toString()}`);return{type:2,content:t,lengthPrefixBytes:n,maxLengthBytes:s}}function $r(t){let e=new te;return e.appendHexString(Je(t.version,1)),e.appendHexString(t.hash160),e.concatBuffer()}function ar(t){let e=new te,r=ct(t.content),n=r.byteLength;return e.appendHexString(Je(n,t.lengthPrefixBytes)),e.push(r),e.concatBuffer()}function nl(t){if(t.type===5)return li(t.address);if(t.type===6)return`${li(t.address)}.${t.contractName.content}`;throw new Error(`Unexpected principal data: ${JSON.stringify(t)}`)}var ui=t=>({type:13,data:t});function sl(t){for(let e in t)if(!Qc(e))throw new Error(`"${e}" is not a valid Clarity name`);return{type:12,data:t}}var il=(t=>(t[t.ClarityAbiTypeUInt128=1]="ClarityAbiTypeUInt128",t[t.ClarityAbiTypeInt128=2]="ClarityAbiTypeInt128",t[t.ClarityAbiTypeBool=3]="ClarityAbiTypeBool",t[t.ClarityAbiTypePrincipal=4]="ClarityAbiTypePrincipal",t[t.ClarityAbiTypeNone=5]="ClarityAbiTypeNone",t[t.ClarityAbiTypeBuffer=6]="ClarityAbiTypeBuffer",t[t.ClarityAbiTypeResponse=7]="ClarityAbiTypeResponse",t[t.ClarityAbiTypeOptional=8]="ClarityAbiTypeOptional",t[t.ClarityAbiTypeTuple=9]="ClarityAbiTypeTuple",t[t.ClarityAbiTypeList=10]="ClarityAbiTypeList",t[t.ClarityAbiTypeStringAscii=11]="ClarityAbiTypeStringAscii",t[t.ClarityAbiTypeStringUtf8=12]="ClarityAbiTypeStringUtf8",t[t.ClarityAbiTypeTraitReference=13]="ClarityAbiTypeTraitReference",t))(il||{});function le(t){switch(t.type){case 3:case 4:return"bool";case 0:return"int";case 1:return"uint";case 2:return`(buff ${t.buffer.length})`;case 9:return"(optional none)";case 10:return`(optional ${le(t.value)})`;case 8:return`(response UnknownType ${le(t.value)})`;case 7:return`(response ${le(t.value)} UnknownType)`;case 5:case 6:return"principal";case 11:return`(list ${t.list.length} ${t.list.length?le(t.list[0]):"UnknownType"})`;case 12:return`(tuple ${Object.keys(t.data).map(e=>`(${e} ${le(t.data[e])})`).join(" ")})`;case 13:return`(string-ascii ${fs(t.data).length})`;case 14:return`(string-utf8 ${ct(t.data).length})`}}function He(t){let e=al(t,!0);switch(t.type){case 8:return{type:le(t),value:e,success:!1};case 7:return{type:le(t),value:e,success:!0};default:return{type:le(t),value:e}}}function al(t,e=!1){switch(t.type){case 3:return!0;case 4:return!1;case 0:case 1:return e?t.value.toString():t.value;case 2:return`0x${M(t.buffer)}`;case 9:return null;case 10:return He(t.value);case 8:return He(t.value);case 7:return He(t.value);case 5:case 6:return nl(t);case 11:return t.list.map(n=>He(n));case 12:let r={};return Object.keys(t.data).map(n=>[n,He(t.data[n])]).forEach(([n,s])=>{r[n]=s}),r;case 13:return t.data;case 14:return t.data}}function $t(t,e){let r=new te,n=Uint8Array.from([t]);return r.push(n),r.push(e),r.concatBuffer()}function ol(t){return Uint8Array.from([t.type])}function cl(t){return t.type===9?new Uint8Array([t.type]):$t(t.type,Fe(t.value))}function ll(t){let e=new Uint8Array(4);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(e.byteOffset,t.buffer.length),$t(t.type,vt([e,Uint8Array.from(t.buffer)]))}function ul(t){let e=Je(to(t.value),16),r=tt(e);return $t(t.type,r)}function hl(t){let e=Je(t.value,16),r=tt(e);return $t(t.type,r)}function fl(t){return $t(t.type,$r(t.address))}function dl(t){return $t(t.type,vt([$r(t.address),ar(t.contractName)]))}function pl(t){return $t(t.type,Fe(t.value))}function gl(t){let e=new te,r=new Uint8Array(4);wo(r,t.list.length,0),e.push(r);for(let n of t.list){let s=Fe(n);e.push(s)}return $t(t.type,e.concatBuffer())}function yl(t){let e=[],r=new Uint8Array(4);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(r.byteOffset,Object.keys(t.data).length),e.push(r);let n=Object.keys(t.data).sort((s,i)=>{let a=ct(s),o=ct(i);return mo(a,o)});for(let s of n){let i=rl(s);e.push(ar(i));let a=Fe(t.data[s]);e.push(a)}return $t(t.type,vt(e))}function hi(t,e){let r=new te,n=(e==="ascii"?fs:ct)(t.data),s=new Uint8Array(4);return new DataView(s.buffer,s.byteOffset,s.byteLength).setUint32(s.byteOffset,n.length),r.push(s),r.push(n),$t(t.type,r.concatBuffer())}function wl(t){return hi(t,"ascii")}function ml(t){return hi(t,"utf8")}function Fe(t){switch(t.type){case 3:case 4:return ol(t);case 9:case 10:return cl(t);case 2:return ll(t);case 0:return ul(t);case 1:return hl(t);case 5:return fl(t);case 6:return dl(t);case 7:case 8:return pl(t);case 11:return gl(t);case 12:return yl(t);case 13:return wl(t);case 14:return ml(t);default:throw new Error("Unable to serialize. Invalid Clarity Value.")}}function gn(t){return`0x${M(Fe(t))}`}async function Tr(t){const e="SP000000000000000000002Q6VF78.pox",r={contractAddress:e.split(".")[0],contractName:e.split(".")[1],functionName:"get-pox-info",functionArgs:[],network:t},n=await bl(r);return console.log("pox: ",n),t==="testnet"?"tb1qasu5x7dllnejmx0dtd5j42quk4q03dl56caqss":"bc1q0pcvvu8ewfqw3p270cwxtsd5pe7us3s8kznftnrhs74w4nfl4rtqjt6hp6"}async function bl(t){const e=(t.network,"https://stacks-node-api.mainnet.stacks.co"+"/v2/contracts/call-read/"+t.contractAddress+"/"+t.contractName+"/"+t.functionName),r=await(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arguments:t.functionArgs,sender:t.contractAddress})})).json();return He(r)}const{console:vl}=Ha,et="src/lib/header/Header.svelte";function yn(t){let e,r,n,s,i,a,o,c,u,h,l,y,d,m,g=t[0].sbtcWalletAddress+"",I,C,$,k,L,U=t[0].network+"",q,Z,K,_,j,W,rt,nt,J,Y,Tt,Zt;const Q={c:function(){e=b("nav"),r=b("div"),n=b("a"),s=b("img"),a=P(),o=b("button"),c=b("span"),u=P(),h=b("div"),l=b("ul"),y=b("li"),d=b("a"),m=H("SBTC Wallet: "),I=H(g),C=P(),$=b("li"),k=b("span"),L=H("Network: "),q=H(U),Z=P(),K=b("ul"),_=b("li"),j=b("a"),W=H("Testnet"),rt=P(),nt=b("li"),J=b("a"),Y=H("Mainnet"),this.h()},l:function(X){e=v(X,"NAV",{class:!0});var ut=A(e);r=v(ut,"DIV",{class:!0});var pt=A(r);n=v(pt,"A",{class:!0,href:!0});var gt=A(n);s=v(gt,"IMG",{class:!0,src:!0,alt:!0}),gt.forEach(S),a=N(pt),o=v(pt,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0,"aria-expanded":!0,"aria-label":!0});var it=A(o);c=v(it,"SPAN",{class:!0}),A(c).forEach(S),it.forEach(S),u=N(pt),h=v(pt,"DIV",{class:!0,id:!0});var je=A(h);l=v(je,"UL",{class:!0});var he=A(l);y=v(he,"LI",{class:!0});var Ct=A(y);d=v(Ct,"A",{href:!0});var ht=A(d);m=F(ht,"SBTC Wallet: "),I=F(ht,g),ht.forEach(S),Ct.forEach(S),C=N(he),$=v(he,"LI",{class:!0});var fe=A($);k=v(fe,"SPAN",{class:!0,id:!0,role:!0,"data-bs-toggle":!0,"aria-expanded":!0});var Ie=A(k);L=F(Ie,"Network: "),q=F(Ie,U),Ie.forEach(S),Z=N(fe),K=v(fe,"UL",{class:!0,"aria-labelledby":!0});var bt=A(K);_=v(bt,"LI",{});var yt=A(_);j=v(yt,"A",{class:!0,href:!0});var ze=A(j);W=F(ze,"Testnet"),ze.forEach(S),yt.forEach(S),rt=N(bt),nt=v(bt,"LI",{});var Ve=A(nt);J=v(Ve,"A",{class:!0,href:!0});var at=A(J);Y=F(at,"Mainnet"),at.forEach(S),Ve.forEach(S),bt.forEach(S),fe.forEach(S),he.forEach(S),je.forEach(S),pt.forEach(S),ut.forEach(S),this.h()},h:function(){f(s,"class","nav-logo"),hr(s.src,i=At)||f(s,"src",i),f(s,"alt","CityCoins Test"),E(s,et,20,3,751),f(n,"class","navbar-brand"),f(n,"href","/"),E(n,et,19,4,714),f(c,"class","navbar-toggler-icon"),E(c,et,23,3,1004),f(o,"class","navbar-toggler"),f(o,"type","button"),f(o,"data-bs-toggle","collapse"),f(o,"data-bs-target","#navbarNav"),f(o,"aria-controls","navbarNav"),f(o,"aria-expanded","false"),f(o,"aria-label","Toggle navigation"),E(o,et,22,2,822),f(d,"href","/"),E(d,et,27,25,1166),f(y,"class","nav-item"),E(y,et,27,4,1145),f(k,"class","nav-link dropdown-toggle text-white"),f(k,"id","navbarDropdown"),f(k,"role","button"),f(k,"data-bs-toggle","dropdown"),f(k,"aria-expanded","false"),E(k,et,29,5,1274),f(j,"class","dropdown-item"),f(j,"href","/"),E(j,et,33,11,1553),E(_,et,33,7,1549),f(J,"class","dropdown-item"),f(J,"href","/"),E(J,et,34,11,1672),E(nt,et,34,7,1668),f(K,"class","dropdown-menu dropdown-menu-start"),f(K,"aria-labelledby","navbarDropdown"),E(K,et,32,5,1462),f($,"class","nav-item dropdown"),E($,et,28,4,1238),f(l,"class","navbar-nav"),E(l,et,26,3,1117),f(h,"class","collapse navbar-collapse"),f(h,"id","navbarNav"),E(h,et,25,2,1060),f(r,"class","container-fluid mx-5"),E(r,et,18,1,675),f(e,"class","navbar navbar-expand-md transparent"),E(e,et,17,0,624)},m:function(X,ut){fr(X,e,ut),p(e,r),p(r,n),p(n,s),p(r,a),p(r,o),p(o,c),p(r,u),p(r,h),p(h,l),p(l,y),p(y,d),p(d,m),p(d,I),p(l,C),p(l,$),p($,k),p(k,L),p(k,q),p($,Z),p($,K),p(K,_),p(_,j),p(j,W),p(K,rt),p(K,nt),p(nt,J),p(J,Y),Tt||(Zt=[Fa(j,"click",Ka(t[2]),!1,!0,!1),Fa(J,"click",Ka(t[3]),!1,!0,!1)],Tt=!0)},p:function(X,[ut]){ut&1&&g!==(g=X[0].sbtcWalletAddress+"")&&ja(I,g),ut&1&&U!==(U=X[0].network+"")&&ja(q,U)},i:qe,o:qe,d:function(X){X&&S(e),Tt=!1,tf(Zt)}};return Qt("SvelteRegisterBlock",{block:Q,id:yn.name,type:"component",source:"",ctx:t}),Q}function Sl(t,e,r){let n;Ra(Mt,"sbtcConfig"),Ma(t,Mt,l=>r(0,n=l));let{$$slots:s={},$$scope:i}=e;_r("Header",s,[]);const a=Mt.subscribe(l=>{console.log("myConfig: ",l)});Dr(a);const o=async l=>{const y=await Tr(l),d=n;d.sbtcWalletAddress=y,d.network=l,Mt.update(()=>d)},c=[];Object.keys(e).forEach(l=>{!~c.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&vl.warn(`<Header> was created with unknown prop '${l}'`)});const u=()=>o("testnet"),h=()=>o("mainnet");return t.$capture_state=()=>({onDestroy:Dr,logoWhite:At,sbtcConfig:Mt,fetchSbtcWalletAddress:Tr,unsubscribe:a,updateNetwork:o,$sbtcConfig:n}),[n,o,u,h]}class fi extends Nr{constructor(e){super(e),Br(this,e,Sl,yn,Lr,{}),Qt("SvelteRegisterComponent",{component:this,tagName:"Header",options:e,id:yn.name})}}const di=""+new URL("../../assets/stx_eco_discord-5cc61295.png",import.meta.url).href,pi=""+new URL("../../assets/stx_eco_twitter-b58c754c.png",import.meta.url).href,gi=""+new URL("../../assets/stx_eco_github-0e15c254.png",import.meta.url).href,T="src/lib/header/FooterLinks.svelte";function wn(t){let e,r,n,s,i,a,o,c,u,h,l,y,d,m,g,I,C,$,k,L,U,q,Z,K,_,j,W,rt,nt,J,Y,Tt,Zt,Q,X,ut,pt,gt,it,je,he,Ct,ht,fe,Ie,bt,yt,ze,Ve,at,ke,Dn,Rn,$e,Ot,Mn,Hn,Te,Ut,Fn,Kn,Ce,Pt,jn,zn,wt,Oe,Vn,qn,Ue,Nt,Zn,Wn,Pe,Bt,Jn,Gn,Ne,Lt,Xn,Yn,Be,Wt,Jt,_t,Gt,Wi,Qn,Dt,Xt,Ji,ts,de,Rt,Yt,Gi;const Xi={c:function(){e=b("div"),r=b("div"),n=b("p"),s=H("Standards"),i=P(),a=b("div"),o=b("a"),c=H("SIP Process"),u=P(),h=b("div"),l=b("a"),y=H("SIP Requests"),d=P(),m=b("div"),g=b("a"),I=H("SIP News"),C=P(),$=b("div"),k=b("p"),L=H("Code"),U=P(),q=b("div"),Z=b("a"),K=H("Clarity Lab"),_=P(),j=b("div"),W=b("a"),rt=H("Raise Issues"),nt=P(),J=b("div"),Y=b("a"),Tt=H("Ecosystem DAO"),Zt=P(),Q=b("div"),X=b("p"),ut=H("Videos"),pt=P(),gt=b("div"),it=b("a"),je=H("Stacks"),he=P(),Ct=b("div"),ht=b("a"),fe=H("Clarity"),Ie=P(),bt=b("div"),yt=b("a"),ze=H("PoX"),Ve=P(),at=b("div"),ke=b("p"),Dn=H("Contact"),Rn=P(),$e=b("div"),Ot=b("a"),Mn=H("Discord"),Hn=P(),Te=b("div"),Ut=b("a"),Fn=H("Enquiries"),Kn=P(),Ce=b("div"),Pt=b("a"),jn=H("Twitter"),zn=P(),wt=b("div"),Oe=b("p"),Vn=H("Partners"),qn=P(),Ue=b("div"),Nt=b("a"),Zn=H("Foundation"),Wn=P(),Pe=b("div"),Bt=b("a"),Jn=H("Hiro Wallet"),Gn=P(),Ne=b("div"),Lt=b("a"),Xn=H("Trust Machines"),Yn=P(),Be=b("div"),Wt=b("div"),Jt=b("div"),_t=b("a"),Gt=b("img"),Qn=P(),Dt=b("a"),Xt=b("img"),ts=P(),de=b("div"),Rt=b("a"),Yt=b("img"),this.h()},l:function(ur){e=v(ur,"DIV",{class:!0});var ft=A(e);r=v(ft,"DIV",{class:!0});var pe=A(r);n=v(pe,"P",{class:!0});var Yi=A(n);s=F(Yi,"Standards"),Yi.forEach(S),i=N(pe),a=v(pe,"DIV",{class:!0});var Qi=A(a);o=v(Qi,"A",{href:!0,target:!0,rel:!0,class:!0});var ta=A(o);c=F(ta,"SIP Process"),ta.forEach(S),Qi.forEach(S),u=N(pe),h=v(pe,"DIV",{class:!0});var ea=A(h);l=v(ea,"A",{href:!0,target:!0,rel:!0,class:!0});var ra=A(l);y=F(ra,"SIP Requests"),ra.forEach(S),ea.forEach(S),d=N(pe),m=v(pe,"DIV",{class:!0});var na=A(m);g=v(na,"A",{href:!0,target:!0,rel:!0,class:!0});var sa=A(g);I=F(sa,"SIP News"),sa.forEach(S),na.forEach(S),pe.forEach(S),C=N(ft),$=v(ft,"DIV",{class:!0});var ge=A($);k=v(ge,"P",{class:!0});var ia=A(k);L=F(ia,"Code"),ia.forEach(S),U=N(ge),q=v(ge,"DIV",{class:!0});var aa=A(q);Z=v(aa,"A",{href:!0,target:!0,rel:!0,class:!0});var oa=A(Z);K=F(oa,"Clarity Lab"),oa.forEach(S),aa.forEach(S),_=N(ge),j=v(ge,"DIV",{class:!0});var ca=A(j);W=v(ca,"A",{href:!0,target:!0,rel:!0,class:!0});var la=A(W);rt=F(la,"Raise Issues"),la.forEach(S),ca.forEach(S),nt=N(ge),J=v(ge,"DIV",{class:!0});var ua=A(J);Y=v(ua,"A",{href:!0,target:!0,rel:!0,class:!0});var ha=A(Y);Tt=F(ha,"Ecosystem DAO"),ha.forEach(S),ua.forEach(S),ge.forEach(S),Zt=N(ft),Q=v(ft,"DIV",{class:!0});var ye=A(Q);X=v(ye,"P",{class:!0});var fa=A(X);ut=F(fa,"Videos"),fa.forEach(S),pt=N(ye),gt=v(ye,"DIV",{class:!0});var da=A(gt);it=v(da,"A",{target:!0,href:!0,rel:!0,class:!0});var pa=A(it);je=F(pa,"Stacks"),pa.forEach(S),da.forEach(S),he=N(ye),Ct=v(ye,"DIV",{class:!0});var ga=A(Ct);ht=v(ga,"A",{target:!0,href:!0,rel:!0,class:!0});var ya=A(ht);fe=F(ya,"Clarity"),ya.forEach(S),ga.forEach(S),Ie=N(ye),bt=v(ye,"DIV",{class:!0});var wa=A(bt);yt=v(wa,"A",{target:!0,href:!0,rel:!0,class:!0});var ma=A(yt);ze=F(ma,"PoX"),ma.forEach(S),wa.forEach(S),ye.forEach(S),Ve=N(ft),at=v(ft,"DIV",{class:!0});var we=A(at);ke=v(we,"P",{class:!0});var ba=A(ke);Dn=F(ba,"Contact"),ba.forEach(S),Rn=N(we),$e=v(we,"DIV",{class:!0});var va=A($e);Ot=v(va,"A",{href:!0,target:!0,rel:!0,class:!0});var Sa=A(Ot);Mn=F(Sa,"Discord"),Sa.forEach(S),va.forEach(S),Hn=N(we),Te=v(we,"DIV",{class:!0});var Ea=A(Te);Ut=v(Ea,"A",{href:!0,target:!0,rel:!0,class:!0});var Aa=A(Ut);Fn=F(Aa,"Enquiries"),Aa.forEach(S),Ea.forEach(S),Kn=N(we),Ce=v(we,"DIV",{class:!0});var xa=A(Ce);Pt=v(xa,"A",{href:!0,target:!0,rel:!0,class:!0});var Ia=A(Pt);jn=F(Ia,"Twitter"),Ia.forEach(S),xa.forEach(S),we.forEach(S),zn=N(ft),wt=v(ft,"DIV",{class:!0});var me=A(wt);Oe=v(me,"P",{class:!0});var ka=A(Oe);Vn=F(ka,"Partners"),ka.forEach(S),qn=N(me),Ue=v(me,"DIV",{class:!0});var $a=A(Ue);Nt=v($a,"A",{class:!0,href:!0,target:!0,rel:!0});var Ta=A(Nt);Zn=F(Ta,"Foundation"),Ta.forEach(S),$a.forEach(S),Wn=N(me),Pe=v(me,"DIV",{class:!0});var Ca=A(Pe);Bt=v(Ca,"A",{class:!0,href:!0,target:!0,rel:!0});var Oa=A(Bt);Jn=F(Oa,"Hiro Wallet"),Oa.forEach(S),Ca.forEach(S),Gn=N(me),Ne=v(me,"DIV",{class:!0});var Ua=A(Ne);Lt=v(Ua,"A",{class:!0,href:!0,target:!0,rel:!0});var Pa=A(Lt);Xn=F(Pa,"Trust Machines"),Pa.forEach(S),Ua.forEach(S),me.forEach(S),Yn=N(ft),Be=v(ft,"DIV",{class:!0});var Na=A(Be);Wt=v(Na,"DIV",{class:!0});var Ur=A(Wt);Jt=v(Ur,"DIV",{class:!0});var Pr=A(Jt);_t=v(Pr,"A",{class:!0,href:!0,target:!0,rel:!0});var Ba=A(_t);Gt=v(Ba,"IMG",{src:!0,alt:!0,width:!0,height:!0}),Ba.forEach(S),Qn=N(Pr),Dt=v(Pr,"A",{class:!0,href:!0,target:!0,rel:!0});var La=A(Dt);Xt=v(La,"IMG",{src:!0,alt:!0,width:!0,height:!0}),La.forEach(S),Pr.forEach(S),ts=N(Ur),de=v(Ur,"DIV",{style:!0});var _a=A(de);Rt=v(_a,"A",{class:!0,href:!0,target:!0,rel:!0});var Da=A(Rt);Yt=v(Da,"IMG",{src:!0,alt:!0,width:!0,height:!0}),Da.forEach(S),_a.forEach(S),Ur.forEach(S),Na.forEach(S),ft.forEach(S),this.h()},h:function(){f(n,"class","s-OMmj-e4ZMm3Z"),E(n,T,9,4,414),f(o,"href","https://github.com/stacksgov/sips/blob/main/sips/sip-000/sip-000-stacks-improvement-proposal-process.md"),f(o,"target","_blank"),f(o,"rel","noreferrer"),f(o,"class","s-OMmj-e4ZMm3Z"),E(o,T,11,6,464),f(a,"class","demo-div"),E(a,T,10,4,435),f(l,"href","https://github.com/stacksgov/sips/pulls"),f(l,"target","_blank"),f(l,"rel","noreferrer"),f(l,"class","s-OMmj-e4ZMm3Z"),E(l,T,14,6,671),f(h,"class","demo-div"),E(h,T,13,4,642),f(g,"href","https://discord.com/channels/621759717756370964/1001471092302544936"),f(g,"target","_blank"),f(g,"rel","noreferrer"),f(g,"class","s-OMmj-e4ZMm3Z"),E(g,T,17,6,815),f(m,"class","demo-div"),E(m,T,16,4,786),f(r,"class","col-md-2 col-sm-6 hideme"),E(r,T,8,2,371),f(k,"class","s-OMmj-e4ZMm3Z"),E(k,T,21,4,1004),f(Z,"href","https://github.com/Clarity-Innovation-Lab"),f(Z,"target","_blank"),f(Z,"rel","noreferrer"),f(Z,"class","s-OMmj-e4ZMm3Z"),E(Z,T,23,6,1049),f(q,"class","demo-div"),E(q,T,22,4,1020),f(W,"href","https://github.com/Clarity-Innovation-Lab/ecosystem-dao/issues"),f(W,"target","_blank"),f(W,"rel","noreferrer"),f(W,"class","s-OMmj-e4ZMm3Z"),E(W,T,26,6,1194),f(j,"class","demo-div"),E(j,T,25,4,1165),f(Y,"href","https://github.com/Clarity-Innovation-Lab/ecosystem-dao"),f(Y,"target","_blank"),f(Y,"rel","noreferrer"),f(Y,"class","s-OMmj-e4ZMm3Z"),E(Y,T,29,6,1361),f(J,"class","demo-div"),E(J,T,28,4,1332),f($,"class","col-md-2 col-sm-6 hideme"),E($,T,20,2,961),f(X,"class","s-OMmj-e4ZMm3Z"),E(X,T,33,4,1543),f(it,"target","_blank"),f(it,"href","https://www.youtube.com/watch?v=fbq6L3PrKWE"),f(it,"rel","noreferrer"),f(it,"class","s-OMmj-e4ZMm3Z"),E(it,T,35,6,1590),f(gt,"class","demo-div"),E(gt,T,34,4,1561),f(ht,"target","_blank"),f(ht,"href","https://www.youtube.com/watch?v=OAVwd6SNJVU&t=717s"),f(ht,"rel","noreferrer"),f(ht,"class","s-OMmj-e4ZMm3Z"),E(ht,T,38,6,1732),f(Ct,"class","demo-div"),E(Ct,T,37,4,1703),f(yt,"target","_blank"),f(yt,"href","https://www.youtube.com/watch?v=NG081fD-PoI"),f(yt,"rel","noreferrer"),f(yt,"class","s-OMmj-e4ZMm3Z"),E(yt,T,41,6,1882),f(bt,"class","demo-div"),E(bt,T,40,4,1853),f(Q,"class","col-md-2 col-sm-6 hideme"),E(Q,T,32,2,1500),f(ke,"class","s-OMmj-e4ZMm3Z"),E(ke,T,45,4,2042),f(Ot,"href","https://discord.com/channels/621759717756370964/971037457661444156"),f(Ot,"target","_blank"),f(Ot,"rel","noreferrer"),f(Ot,"class","s-OMmj-e4ZMm3Z"),E(Ot,T,47,6,2090),f($e,"class","demo-div"),E($e,T,46,4,2061),f(Ut,"href","mailto:mike@claritylab.dev"),f(Ut,"target","_blank"),f(Ut,"rel","noreferrer"),f(Ut,"class","s-OMmj-e4ZMm3Z"),E(Ut,T,50,6,2256),f(Te,"class","demo-div"),E(Te,T,49,4,2227),f(Pt,"href","https://mobile.twitter.com/radicleart"),f(Pt,"target","_blank"),f(Pt,"rel","noreferrer"),f(Pt,"class","s-OMmj-e4ZMm3Z"),E(Pt,T,53,6,2384),f(Ce,"class","demo-div"),E(Ce,T,52,4,2355),f(at,"class","col-md-2 col-sm-6 hideme"),E(at,T,44,2,1999),f(Oe,"class","s-OMmj-e4ZMm3Z"),E(Oe,T,57,4,2542),f(Nt,"class"," s-OMmj-e4ZMm3Z"),f(Nt,"href",t[1]),f(Nt,"target","_blank"),f(Nt,"rel","noreferrer"),E(Nt,T,59,6,2591),f(Ue,"class","demo-div"),E(Ue,T,58,4,2562),f(Bt,"class"," s-OMmj-e4ZMm3Z"),f(Bt,"href",t[0]),f(Bt,"target","_blank"),f(Bt,"rel","noreferrer"),E(Bt,T,62,6,2712),f(Pe,"class","demo-div"),E(Pe,T,61,4,2683),f(Lt,"class"," s-OMmj-e4ZMm3Z"),f(Lt,"href","https://www.trustmachines.co/"),f(Lt,"target","_blank"),f(Lt,"rel","noreferrer"),E(Lt,T,65,6,2838),f(Ne,"class","demo-div"),E(Ne,T,64,4,2809),f(wt,"class","col-md-2 col-sm-6 hideme"),E(wt,T,56,2,2499),hr(Gt.src,Wi=di)||f(Gt,"src",Wi),f(Gt,"alt","discord ecosystem dao logo"),f(Gt,"width","39"),f(Gt,"height","auto"),E(Gt,T,71,131,3181),f(_t,"class","mx-0 s-OMmj-e4ZMm3Z"),f(_t,"href","https://discord.com/channels/621759717756370964/971037457661444156"),f(_t,"target","_blank"),f(_t,"rel","noreferrer"),E(_t,T,71,8,3058),hr(Xt.src,Ji=pi)||f(Xt,"src",Ji),f(Xt,"alt","twitter ecosystem dao logo"),f(Xt,"width","39"),f(Xt,"height","auto"),E(Xt,T,72,102,3374),f(Dt,"class","mx-0 s-OMmj-e4ZMm3Z"),f(Dt,"href","https://mobile.twitter.com/radicleart"),f(Dt,"target","_blank"),f(Dt,"rel","noreferrer"),E(Dt,T,72,8,3280),f(Jt,"class","mb-0"),E(Jt,T,70,6,3031),hr(Yt.src,Gi=gi)||f(Yt,"src",Gi),f(Yt,"alt","github ecosystem dao logo"),f(Yt,"width","39"),f(Yt,"height","auto"),E(Yt,T,74,158,3636),f(Rt,"class"," s-OMmj-e4ZMm3Z"),f(Rt,"href","https://github.com/Clarity-Innovation-Lab/ecosystem-dao"),f(Rt,"target","_blank"),f(Rt,"rel","noreferrer"),E(Rt,T,74,50,3528),za(de,"position","relative"),za(de,"left","2px"),E(de,T,74,6,3484),f(Wt,"class","text-center"),E(Wt,T,69,4,2999),f(Be,"class","col-md-2 col-sm-12 "),E(Be,T,68,2,2961),f(e,"class","row"),E(e,T,7,0,351)},m:function(ur,ft){fr(ur,e,ft),p(e,r),p(r,n),p(n,s),p(r,i),p(r,a),p(a,o),p(o,c),p(r,u),p(r,h),p(h,l),p(l,y),p(r,d),p(r,m),p(m,g),p(g,I),p(e,C),p(e,$),p($,k),p(k,L),p($,U),p($,q),p(q,Z),p(Z,K),p($,_),p($,j),p(j,W),p(W,rt),p($,nt),p($,J),p(J,Y),p(Y,Tt),p(e,Zt),p(e,Q),p(Q,X),p(X,ut),p(Q,pt),p(Q,gt),p(gt,it),p(it,je),p(Q,he),p(Q,Ct),p(Ct,ht),p(ht,fe),p(Q,Ie),p(Q,bt),p(bt,yt),p(yt,ze),p(e,Ve),p(e,at),p(at,ke),p(ke,Dn),p(at,Rn),p(at,$e),p($e,Ot),p(Ot,Mn),p(at,Hn),p(at,Te),p(Te,Ut),p(Ut,Fn),p(at,Kn),p(at,Ce),p(Ce,Pt),p(Pt,jn),p(e,zn),p(e,wt),p(wt,Oe),p(Oe,Vn),p(wt,qn),p(wt,Ue),p(Ue,Nt),p(Nt,Zn),p(wt,Wn),p(wt,Pe),p(Pe,Bt),p(Bt,Jn),p(wt,Gn),p(wt,Ne),p(Ne,Lt),p(Lt,Xn),p(e,Yn),p(e,Be),p(Be,Wt),p(Wt,Jt),p(Jt,_t),p(_t,Gt),p(Jt,Qn),p(Jt,Dt),p(Dt,Xt),p(Wt,ts),p(Wt,de),p(de,Rt),p(Rt,Yt)},p:qe,i:qe,o:qe,d:function(ur){ur&&S(e)}};return Qt("SvelteRegisterBlock",{block:Xi,id:wn.name,type:"component",source:"",ctx:t}),Xi}function El(t,e,r){let{$$slots:n={},$$scope:s}=e;_r("FooterLinks",n,[]);let i="https://www.hiro.so/wallet/install-web",a="https://stacks.org";const o=[];return Object.keys(e).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<FooterLinks> was created with unknown prop '${c}'`)}),t.$capture_state=()=>({stx_eco_discord:di,stx_eco_twitter:pi,stx_eco_github:gi,webWalletLink:i,stacksOrg:a}),t.$inject_state=c=>{"webWalletLink"in c&&r(0,i=c.webWalletLink),"stacksOrg"in c&&r(1,a=c.stacksOrg)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[i,a]}class yi extends Nr{constructor(e){super(e),Br(this,e,El,wn,Lr,{}),Qt("SvelteRegisterComponent",{component:this,tagName:"FooterLinks",options:e,id:wn.name})}}const ot="src/lib/header/Footer.svelte";function mn(t){let e,r,n,s,i,a,o,c,u,h,l,y,d,m,g,I,C,$,k,L,U,q,Z;d=new yi({$$inline:!0});const K={c:function(){e=b("div"),r=b("div"),n=b("div"),s=b("div"),i=b("div"),a=b("a"),o=b("img"),u=P(),h=b("div"),l=b("div"),y=b("div"),es(d.$$.fragment),m=P(),g=b("div"),I=b("div"),C=b("div"),$=H("sBTC \xA9 2023"),k=P(),L=b("div"),U=b("div"),q=H("For the \u2665 of crypto!"),this.h()},l:function(_){e=v(_,"DIV",{class:!0,id:!0});var j=A(e);r=v(j,"DIV",{class:!0});var W=A(r);n=v(W,"DIV",{class:!0});var rt=A(n);s=v(rt,"DIV",{class:!0});var nt=A(s);i=v(nt,"DIV",{class:!0});var J=A(i);a=v(J,"A",{class:!0,href:!0});var Y=A(a);o=v(Y,"IMG",{src:!0,alt:!0,width:!0,height:!0}),Y.forEach(S),J.forEach(S),nt.forEach(S),u=N(rt),h=v(rt,"DIV",{class:!0});var Tt=A(h);l=v(Tt,"DIV",{class:!0});var Zt=A(l);y=v(Zt,"DIV",{class:!0});var Q=A(y);rs(d.$$.fragment,Q),Q.forEach(S),Zt.forEach(S),Tt.forEach(S),rt.forEach(S),m=N(W),g=v(W,"DIV",{class:!0});var X=A(g);I=v(X,"DIV",{class:!0});var ut=A(I);C=v(ut,"DIV",{class:!0});var pt=A(C);$=F(pt,"sBTC \xA9 2023"),pt.forEach(S),ut.forEach(S),k=N(X),L=v(X,"DIV",{class:!0});var gt=A(L);U=v(gt,"DIV",{class:!0});var it=A(U);q=F(it,"For the \u2665 of crypto!"),it.forEach(S),gt.forEach(S),X.forEach(S),W.forEach(S),j.forEach(S),this.h()},h:function(){hr(o.src,c=At)||f(o,"src",c),f(o,"alt","stacks ecosystem dao logo"),f(o,"width","198"),f(o,"height","auto"),E(o,ot,10,14,361),f(a,"class","navbar-brand"),f(a,"href","/"),E(a,ot,9,12,313),f(i,"class",""),E(i,ot,8,10,286),f(s,"class","px-0 col-4"),E(s,ot,7,8,251),f(y,"class","col-12"),E(y,ot,16,12,559),f(l,"class","row"),E(l,ot,15,10,529),f(h,"class","col-8"),E(h,ot,14,8,499),f(n,"class","row mx-5"),E(n,ot,6,6,220),f(C,"class","copywright s-llc3ExEW13Oc"),E(C,ot,24,12,781),f(I,"class","mb-4"),E(I,ot,23,8,749),f(U,"class","copywright s-llc3ExEW13Oc"),E(U,ot,27,10,881),f(L,"class","mb-4"),E(L,ot,26,8,851),f(g,"class","mx-5 mt-5 d-flex justify-content-between copy s-llc3ExEW13Oc"),E(g,ot,22,6,680),f(r,"class","pt-5"),E(r,ot,5,4,194),f(e,"class","container-fluid footer s-llc3ExEW13Oc"),f(e,"id","footer-section"),E(e,ot,4,0,132)},m:function(_,j){fr(_,e,j),p(e,r),p(r,n),p(n,s),p(s,i),p(i,a),p(a,o),p(n,u),p(n,h),p(h,l),p(l,y),ns(d,y,null),p(r,m),p(r,g),p(g,I),p(I,C),p(C,$),p(g,k),p(g,L),p(L,U),p(U,q),Z=!0},p:qe,i:function(_){Z||(Le(d.$$.fragment,_),Z=!0)},o:function(_){Ze(d.$$.fragment,_),Z=!1},d:function(_){_&&S(e),ss(d)}};return Qt("SvelteRegisterBlock",{block:K,id:mn.name,type:"component",source:"",ctx:t}),K}function Al(t,e,r){let{$$slots:n={},$$scope:s}=e;_r("Footer",n,[]);const i=[];return Object.keys(e).forEach(a=>{!~i.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Footer> was created with unknown prop '${a}'`)}),t.$capture_state=()=>({FooterLinks:yi,logoWhite:At}),[]}class wi extends Nr{constructor(e){super(e),Br(this,e,Al,mn,Lr,{}),Qt("SvelteRegisterComponent",{component:this,tagName:"Footer",options:e,id:mn.name})}}var xl="https://stacks-node-api.mainnet.stacks.co",Il="https://stacks-node-api.testnet.stacks.co",ue=class{constructor(t={url:xl}){w(this,"version",Xe.Mainnet);w(this,"chainId",ee.Mainnet);w(this,"broadcastEndpoint","/v2/transactions");w(this,"transferFeeEstimateEndpoint","/v2/fees/transfer");w(this,"accountEndpoint","/v2/accounts");w(this,"contractAbiEndpoint","/v2/contracts/interface");w(this,"readOnlyFunctionCallEndpoint","/v2/contracts/call-read");w(this,"bnsLookupUrl");w(this,"_coreApiUrl");w(this,"fetcher");w(this,"getCoreApiUrl",()=>this._coreApiUrl);w(this,"isMainnet",()=>this.version===Xe.Mainnet);w(this,"getBroadcastApiUrl",()=>`${this.getCoreApiUrl()}${this.broadcastEndpoint}`);w(this,"getTransferFeeEstimateApiUrl",()=>`${this.getCoreApiUrl()}${this.transferFeeEstimateEndpoint}`);w(this,"getAccountApiUrl",t=>`${this.getCoreApiUrl()}${this.accountEndpoint}/${t}?proof=0`);w(this,"getAbiApiUrl",(t,e)=>`${this.getCoreApiUrl()}${this.contractAbiEndpoint}/${t}/${e}`);w(this,"getReadOnlyFunctionCallApiUrl",(t,e,r)=>`${this.getCoreApiUrl()}${this.readOnlyFunctionCallEndpoint}/${t}/${e}/${encodeURIComponent(r)}`);w(this,"getInfoUrl",()=>`${this.getCoreApiUrl()}/v2/info`);w(this,"getBlockTimeInfoUrl",()=>`${this.getCoreApiUrl()}/extended/v1/info/network_block_times`);w(this,"getPoxInfoUrl",()=>`${this.getCoreApiUrl()}/v2/pox`);w(this,"getRewardsUrl",(t,e)=>{let r=`${this.getCoreApiUrl()}/extended/v1/burnchain/rewards/${t}`;return e&&(r=`${r}?limit=${e.limit}&offset=${e.offset}`),r});w(this,"getRewardsTotalUrl",t=>`${this.getCoreApiUrl()}/extended/v1/burnchain/rewards/${t}/total`);w(this,"getRewardHoldersUrl",(t,e)=>{let r=`${this.getCoreApiUrl()}/extended/v1/burnchain/reward_slot_holders/${t}`;return e&&(r=`${r}?limit=${e.limit}&offset=${e.offset}`),r});w(this,"getStackerInfoUrl",(t,e)=>`${this.getCoreApiUrl()}${this.readOnlyFunctionCallEndpoint}
    ${t}/${e}/get-stacker-info`);if(!t.url&&!t.coreApiUrl)throw Error("[miro-stacks] Network initialized with no api url");this._coreApiUrl=t.url||t.coreApiUrl,this.bnsLookupUrl=t.bnsLookupUrl||t.url||t.coreApiUrl,this.fetcher=t.fetcher||ve}get coreApiUrl(){return this._coreApiUrl}set coreApiUrl(t){throw new Error("Cannot modify property `coreApiUrl` after object initialization")}getNameInfo(t){let e=`${this.bnsLookupUrl}/v1/names/${t}`;return this.fetcher(e).then(r=>{if(r.status===404)throw new Error("Name not found");if(r.status!==200)throw new Error(`Bad response status: ${r.status}`);return r.json()}).then(r=>r.address?Object.assign({},r,{address:r.address}):r)}},or=class extends ue{constructor(e={url:Il,fetcher:ve}){super(e);w(this,"version",Xe.Testnet);w(this,"chainId",ee.Testnet)}},kl=(t=>(t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any",t))(kl||{});Xe.Mainnet;var $l=(t=>(t[t.Allow=1]="Allow",t[t.Deny=2]="Deny",t))($l||{}),Tl=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(Tl||{}),Cl=(t=>(t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored",t))(Cl||{}),Ol=(t=>(t[t.SerializeP2PKH=0]="SerializeP2PKH",t[t.SerializeP2SH=1]="SerializeP2SH",t[t.SerializeP2WPKH=2]="SerializeP2WPKH",t[t.SerializeP2WSH=3]="SerializeP2WSH",t))(Ol||{}),Ul=(t=>(t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig",t))(Ul||{}),Pl=(t=>(t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed",t))(Pl||{}),Nl=(t=>(t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual",t))(Nl||{}),Bl=(t=>(t[t.DoesNotOwn=16]="DoesNotOwn",t[t.Owns=17]="Owns",t))(Bl||{}),Ll=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(Ll||{}),_l=(t=>(t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther",t))(_l||{}),Dl=(t=>(t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t))(Dl||{});function Rl(t){let e=new te;return e.appendByte(t.conditionType),e.push(Ml(t.principal)),(t.conditionType===1||t.conditionType===2)&&e.push(Hl(t.assetInfo)),t.conditionType===2&&e.push(Fe(t.assetName)),e.appendByte(t.conditionCode),(t.conditionType===0||t.conditionType===1)&&e.push(ro(t.amount,!1,8)),e.concatBuffer()}function Ml(t){let e=new te;return e.push(Uint8Array.from([t.prefix])),e.push($r(t.address)),t.prefix===ci.Contract&&e.push(ar(t.contractName)),e.concatBuffer()}function Hl(t){let e=new te;return e.push($r(t.address)),e.push(ar(t.contractName)),e.push(ar(t.assetName)),e.concatBuffer()}var Fl=(t=>(t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed",t))(Fl||{}),bn=typeof document<"u",Kl=(t=>(t.SessionStorageKey="stacks-session",t.NetworkStorageKey="stacks-network",t))(Kl||{}),zt=be("localStorage",{returnEmptyObject:!0}),jl={setItem:(t,e)=>{if(bn)return zt==null?void 0:zt.setItem(t,e)},getItem:t=>{if(bn){let e=zt==null?void 0:zt.getItem(t);if(e===null)throw new Error("defaultStorageAdapter: no value stored");return e}},removeItem:t=>{if(bn)return zt==null?void 0:zt.removeItem(t)}},cr=t=>t?M(kt(t,!0)):null;function zl(t){return t==null?void 0:t.map(e=>typeof e!="string"?M(Rl(e)):e)}var vn=(t,e)=>e?new dn("ES256k",e).sign(t):Jc(t),Sn=async(t,e)=>{let r={...t,postConditions:zl(t.postConditions)};return vn(r,e)},Vl=(t=>(t.ContractCall="contract_call",t.ContractDeploy="smart_contract",t.STXTransfer="token_transfer",t))(Vl||{});async function ql({functionArgs:t,privateKey:e,...r}){let n=cr(e),s={...r,functionArgs:t.map(i=>Rr(typeof i=="string"?i:gn(i))),txType:"contract_call",publicKey:n};return Sn(s,e)}async function Zl({privateKey:t,...e}){let r={...e,publicKey:cr(t),txType:"smart_contract"};return Sn(r,t)}async function Wl({privateKey:t,...e}){let r={...e,amount:typeof e.amount=="bigint"?Number(e.amount).toString(10):e.amount,publicKey:cr(t),txType:"token_transfer"};return Sn(r,t)}function Jl(t){let e=t.split(":");if(e.length!==3)throw new TypeError("Decentralized IDs must have 3 parts");if(e[0].toLowerCase()!=="did")throw new TypeError('Decentralized IDs must start with "did"');return e[1].toLowerCase()}function Gl(t){return t&&Jl(t)==="btc-addr"?t.split(":")[2]:void 0}async function Xl(t,e){let r=pn(t),n=r==null?void 0:r.payload,s;if(n.private_key)try{let i=Ya(n.private_key);s=await Ys({privateKey:e,cipherObject:i})}catch{console.error("[micro-stacks] failed to decrypt appPrivateKey")}return{addresses:n.profile.stxAddress,appPrivateKey:s,associationToken:n.associationToken,hubUrl:n.hubUrl,public_keys:n.public_keys,profile:n.profile,profile_url:n.profile_url,username:n.username,version:n.version,decentralizedID:n.iss,identityAddress:Gl(n.iss)}}function mi(){return be("StacksProvider",{returnEmptyObject:!1,usageDesc:"authenticate",throwIfUnavailable:!0})}async function Yl(t,e=jl,r=JSON.stringify){var n,s;if(!t.appDetails)throw Error("[micro-stacks] authenticate error: `authOptions.appDetails` are required for authentication");try{let i=M(sn()),a=await ru(t,i),o=await Xl(a,i);return(n=t==null?void 0:t.onFinish)==null||n.call(t,o),e.setItem("stacks-session",r(o)),o}catch(i){(s=t==null?void 0:t.onCancel)==null||s.call(t,i.message)}}function Ql(t,e){if(!t.appDetails)throw Error("[micro-stacks] authenticate error: `authOptions.appDetails` are required for authentication");let r=t.scopes||[],n=be("location",{returnEmptyObject:!0}).origin;return{scopes:[...new Set(["store_write",...r])],redirect_uri:n,public_keys:[e],domain_name:n,appDetails:t.appDetails}}async function tu(t,e){return new dn("ES256k",e).sign(t)}async function eu(t,e){let r=M(kt(e)),n=Ql(t,r);return tu(n,e)}async function ru(t,e){let r=mi();if(!r)throw Error("This function can only be called on the client, and with the presence of StacksProvider");let n=await eu(t,e);return r.authenticationRequest(n)}function En(t){return async function(e){let{token:r,onFinish:n,onCancel:s}=e;try{let i=mi();if(!i)throw new Error("[micro-stacks/connect] No Stacks provider");let a=i[t];if(typeof a!="function")throw new Error(`[micro-stacks/connect] StacksProvider method ${t} not found`);let o=await a(r);n==null||n(o)}catch(i){s==null||s(i==null?void 0:i.message)}}}var nu=En("transactionRequest"),su=En("signatureRequest"),iu=En("structuredDataSignatureRequest"),au=(t=>(t.Chrome="https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj",t.Firefox="https://addons.mozilla.org/en-US/firefox/addon/hiro-wallet/",t.Mobile="https://www.xverse.app",t.Browser="https://www.hiro.so/wallet/install-web",t))(au||{}),ou=async t=>{let e={stxAddress:t.stxAddress,message:t.message,appDetails:t.appDetails??null,publicKey:cr(t.privateKey),network:t.network};return vn(e,t.privateKey)},cu=async t=>{try{let e=await ou({message:t.message,network:t.network,privateKey:t.privateKey,stxAddress:t.stxAddress,authOrigin:t.authOrigin,appDetails:t.appDetails});return su({token:e,onFinish:t.onFinish,onCancel:t.onCancel})}catch(e){console.error("[micro-stacks] handleSignMessageRequest failed"),console.error(e)}},lu=(t,e,r)=>sl({name:ui(t),version:ui(e),"chain-id":Yc(r)}),uu=t=>{var e;let r=typeof t.message!="string"?gn(t.message):t.message,n=lu(t.domain.name,t.domain.version,t.domain.chainId??((e=t.network)==null?void 0:e.chainId)??ee.Mainnet),s=gn(n),i={stxAddress:t.stxAddress,message:Rr(r),domain:Rr(s),appDetails:t.appDetails,publicKey:cr(t.privateKey),network:t.network};return vn(i,t==null?void 0:t.privateKey)},hu=async t=>{try{let e=await uu({message:t.message,domain:t.domain,privateKey:t.privateKey,stxAddress:t.stxAddress,authOrigin:t.authOrigin,appDetails:t.appDetails,network:t.network});return iu({token:e,onFinish:t.onFinish,onCancel:t.onCancel})}catch(e){console.error("[micro-stacks] handleSignStructuredDataRequest failed"),console.error(e)}},fu=9007199254740991;function bi(t){if(t<0||t>fu||t%1!==0)throw new RangeError("value out of range")}var vi=(t,e,r)=>{bi(t);let n;if(e||(e=new Uint8Array(du(t))),!_e(e))throw new TypeError("uint8Array must be of Uint8Array type");return r||(r=0),t<253?(pr(e,t,r),n=1):t<=65535?(pr(e,253,r),yo(e,t,r+1),n=3):t<=4294967295?(pr(e,254,r),jr(e,t,r+1),n=5):(pr(e,255,r),jr(e,t>>>0,r+1),jr(e,t/4294967296|0,r+5),n=9),vi.bytes=n,e};function du(t){return bi(t),t<253?1:t<=65535?3:t<=4294967295?5:9}var pu=`Stacks Signed Message:
`,Si=gr(pu),gu=`Stacks Message Signing:
`,yu=gr(gu);function Ei(t,e=Si){return lt(wu(t,e))}function wu(t,e=Si){let r=typeof t=="string"?gr(t):t,n=vi(r.length);return vt([e,n,r])}var An=32;function mu(t){if(t.length<An*2*2+1)throw new Error("Invalid signature");let e=t.slice(0,2),r=t.slice(2,2+An*2),n=t.slice(2+An*2);return{recoveryBytes:We(e),r,s:n}}function bu(t){return t.slice(-2)+t.slice(0,-2)}var Ai=({hash:t,signature:e,recoveryBytes:r})=>dc(t,e,Number(r),!0),xi=t=>{let{signature:e,mode:r="rsv"}=t,{r:n,s,recoveryBytes:i}=mu(r==="rsv"?bu(e):e);return{signature:new Kt(We(n),We(s)),recoveryBytes:i}},Ii=t=>{if(!t.publicKey&&!t.stxAddress)throw Error("[micro-stacks/connect[ verifyMessageSignature -- You must pass `stxAddress` if you are recovering the public key from the signature");let{message:e,mode:r="rsv"}=t,n=t.publicKey;try{let s=typeof e=="string"?Ei(e,t.prefix):e,{signature:i,recoveryBytes:a}=xi({signature:t.signature,mode:r});if(!n){let[o]=ir(t.stxAddress);n=M(Ai({hash:s,signature:i,recoveryBytes:a}));let c=cn(n,o);if(c!==t.stxAddress)return console.error(`[micro-stacks/connect] verifyMessageSignature Stacks address is not correct. expected: ${t.stxAddress}, received: ${c}`),!1}return Er(i,s,n,{strict:!1})}catch(s){return console.error("[micro-stacks/connect] verifyMessageSignature failed",s),!1}},vu=t=>Ii(t)||Ii({...t,prefix:yu});const ki=t=>{let e;const r=new Set,n=(a,o)=>{const c=typeof a=="function"?a(e):a;if(c!==e){const u=e;e=o??typeof c!="object"?c:Object.assign({},e,c),r.forEach(h=>h(e,u))}},s=()=>e,i={setState:n,getState:s,subscribe:a=>(r.add(a),()=>r.delete(a)),destroy:()=>r.clear()};return e=t(n,s,i),i},Su=t=>t?ki(t):ki,Eu=t=>(e,r,n)=>{const s=n.subscribe;return n.subscribe=(i,a,o)=>{let c=i;if(a){const u=(o==null?void 0:o.equalityFn)||Object.is;let h=i(n.getState());c=l=>{const y=i(l);if(!u(h,y)){const d=h;a(h=y,d)}},o!=null&&o.fireImmediately&&a(h,h)}return s(c)},t(e,r,n)},Au=Eu,Cr=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Cr(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Cr(n)(r)}}}},xu=(t,e)=>(r,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:I=>I,version:0,merge:(I,C)=>({...C,...I}),...e},a=!1;const o=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...I)},n,s);const h=Cr(i.serialize),l=()=>{const I=i.partialize({...n()});let C;const $=h({state:I,version:i.version}).then(k=>u.setItem(i.name,k)).catch(k=>{C=k});if(C)throw C;return $},y=s.setState;s.setState=(I,C)=>{y(I,C),l()};const d=t((...I)=>{r(...I),l()},n,s);let m;const g=()=>{var I;if(!u)return;a=!1,o.forEach($=>$(n()));const C=((I=i.onRehydrateStorage)==null?void 0:I.call(i,n()))||void 0;return Cr(u.getItem.bind(u))(i.name).then($=>{if($)return i.deserialize($)}).then($=>{if($)if(typeof $.version=="number"&&$.version!==i.version){if(i.migrate)return i.migrate($.state,$.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return $.state}).then($=>{var k;return m=i.merge($,(k=n())!=null?k:d),r(m,!0),l()}).then(()=>{C==null||C(m,void 0),a=!0,c.forEach($=>$(m))}).catch($=>{C==null||C(void 0,$)})};return s.persist={setOptions:I=>{i={...i,...I},I.getStorage&&(u=I.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:I=>(o.add(I),()=>{o.delete(I)}),onFinishHydration:I=>(c.add(I),()=>{c.delete(I)})},g(),m||d},Iu=xu;var ku=!1,xn="Invariant failed";function $u(t,e){if(!t){if(ku)throw new Error(xn);var r=typeof e=="function"?e():e,n=r?"".concat(xn,": ").concat(r):xn;throw new Error(n)}}function Tu(t){return t=Cu(t),t=Ou(t),Uu(t)}function Cu(t){let e=/(^|[^\\]);.*/g;return t.replace(e,function(r,n){return n||""})}function Ou(t){let e=[],r=/\([\s\S]*?\)/gim,n=r.exec(t);for(;n!==null;){let i=n[0].replace(/\s+/gm," ");e.push({match:n,replacement:i}),n=r.exec(t)}let s=t.split("");for(let i of e){let{match:a,replacement:o}=i;s.splice(a.index,a[0].length,o)}return s.join("").replace(/\(|\)/gim," ")}function Uu(t){let e={},r=t.split(`
`);for(let n of r){if(!n||!n.trim())continue;let s=n.toUpperCase();/\s+TXT\s+/.test(s)?(e.txt=e.txt||[],e.txt.push(Ru(n))):s.indexOf("$ORIGIN")===0?e.$origin=n.split(/\s+/g)[1]:s.indexOf("$TTL")===0?e.$ttl=parseInt(n.split(/\s+/g)[1],10):/\s+SOA\s+/.test(s)?e.soa=Pu(n):/\s+NS\s+/.test(s)?(e.ns=e.ns||[],e.ns.push(Nu(n))):/\s+A\s+/.test(s)?(e.a=e.a||[],e.a.push(Bu(n,e.a))):/\s+AAAA\s+/.test(s)?(e.aaaa=e.aaaa||[],e.aaaa.push(Lu(n))):/\s+CNAME\s+/.test(s)?(e.cname=e.cname||[],e.cname.push(_u(n))):/\s+MX\s+/.test(s)?(e.mx=e.mx||[],e.mx.push(Du(n))):/\s+PTR\s+/.test(s)?(e.ptr=e.ptr||[],e.ptr.push(Mu(n,e.ptr,e.$origin))):/\s+SRV\s+/.test(s)?(e.srv=e.srv||[],e.srv.push(Hu(n))):/\s+SPF\s+/.test(s)?(e.spf=e.spf||[],e.spf.push(Fu(n))):/\s+URI\s+/.test(s)&&(e.uri=e.uri||[],e.uri.push(Ku(n)))}return e}function Pu(t){let e={},r=t.trim().split(/\s+/g),n=r.length;return e.name=r[0],e.minimum=parseInt(r[n-1],10),e.expire=parseInt(r[n-2],10),e.retry=parseInt(r[n-3],10),e.refresh=parseInt(r[n-4],10),e.serial=parseInt(r[n-5],10),e.rname=r[n-6],e.mname=r[n-7],isNaN(r[1])||(e.ttl=parseInt(r[1],10)),e}function Nu(t){let e=t.trim().split(/\s+/g),r=e.length,n={name:e[0],host:e[r-1]};return isNaN(e[1])||(n.ttl=parseInt(e[1],10)),n}function Bu(t,e){let r=t.trim().split(/\s+/g),n=t.trim().toUpperCase().split(/\s+/g),s=r.length,i={name:r[0],ip:r[s-1]};return n.lastIndexOf("A")===0&&(e.length?i.name=e[e.length-1].name:i.name="@"),isNaN(r[1])||(i.ttl=parseInt(r[1],10)),i}function Lu(t){let e=t.trim().split(/\s+/g),r=e.length,n={name:e[0],ip:e[r-1]};return isNaN(e[1])||(n.ttl=parseInt(e[1],10)),n}function _u(t){let e=t.trim().split(/\s+/g),r=e.length,n={name:e[0],alias:e[r-1]};return isNaN(e[1])||(n.ttl=parseInt(e[1],10)),n}function Du(t){let e=t.trim().split(/\s+/g),r=e.length,n={name:e[0],preference:parseInt(e[r-2],10),host:e[r-1]};return isNaN(e[1])||(n.ttl=parseInt(e[1],10)),n}function Ru(t){let e=t.trim().match(/[^\s"']+|"[^"]*"|'[^']*'/g);if(!e)throw new Error("Failure to tokenize TXT record");let r=e.length,n=e.indexOf("TXT");function s(o){return o.indexOf('"')>-1&&(o=o.split('"')[1]),o}let i;r-n-1>1?i=[...e.slice(n+1).map(s)]:i=s(e[r-1]);let a={name:e[0],txt:i};return isNaN(e[1])||(a.ttl=parseInt(e[1],10)),a}function Mu(t,e,r){let n=t.trim().split(/\s+/g);t.trim().toUpperCase().split(/\s+/g).lastIndexOf("PTR")===0&&e[e.length-1]&&n.unshift(e[e.length-1].name);let s=n.length,i={name:n[0],fullname:`${n[0]}.${r}`,host:n[s-1]};return isNaN(n[1])||(i.ttl=parseInt(n[1],10)),i}function Hu(t){let e=t.trim().split(/\s+/g),r=e.length,n={name:e[0],target:e[r-1],priority:parseInt(e[r-4],10),weight:parseInt(e[r-3],10),port:parseInt(e[r-2],10)};return isNaN(e[1])||(n.ttl=parseInt(e[1],10)),n}function Fu(t){let e=t.trim().split(/\s+/g),r={name:e[0],data:""},n=e.length;for(;n-- >4;)r.data=e[n]+" "+r.data.trim();return isNaN(e[1])||(r.ttl=parseInt(e[1],10)),r}function Ku(t){let e=t.trim().split(/\s+/g),r=e.length,n={name:e[0],target:e[r-1].replace(/"/g,""),priority:parseInt(e[r-3],10),weight:parseInt(e[r-2],10)};return isNaN(e[1])||(n.ttl=parseInt(e[1],10)),n}var ju=Object.defineProperty,zu=(t,e,r)=>e in t?ju(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vu=(t,e,r)=>(zu(t,typeof e!="symbol"?e+"":e,r),r);function qu(t){return(t==null?void 0:t.map(e=>({...e,domain:e.path})))??null}function Zu(t){let{hubInfo:e,privateKey:r,gaiaHubUrl:n,associationToken:s=null,scopes:i}=t,{challenge_text:a}=e,o=M(kt(r,!0)),c=sn(16).toString();return{gaiaChallenge:a,hubUrl:n,iss:o,salt:c,associationToken:s,scopes:qu(i)}}function Wu(t){let e=Zu(t);return`v1:${new dn("ES256K",t.privateKey).signSync(e)}`}var Ju={challenge_text:'["gaiahub","0","storage2.blockstack.org","blockstack_storage_please_sign"]',latest_auth_version:"v1",max_file_upload_size_megabytes:20,read_url_prefix:"https://gaia.blockstack.org/hub/"};function Gu(t){let{gaiaHubUrl:e,privateKey:r,associationToken:n,scopes:s}=t,i=Ju,{read_url_prefix:a,max_file_upload_size_megabytes:o}=i,c=Wu({hubInfo:i,privateKey:r,gaiaHubUrl:e,associationToken:n,scopes:s});return{address:Gs(r),url_prefix:a,token:c,server:e,max_file_upload_size_megabytes:o??20}}var Vt={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(Vt);var $i=class extends Error{constructor(e){super();w(this,"message");w(this,"code");w(this,"parameter");let r=e.message,n=`Error Code: ${e.code}`,s=this.stack;if(s)n+=`Stack Trace:
${s}`;else try{throw new Error}catch(i){s=i.stack}r+=`
If you believe this exception is caused by a bug in blockstack.js,
      please file a bug report: https://github.com/blockstack/blockstack.js/issues

${n}`,this.message=r,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}},qt=class extends $i{constructor(t){let e=`Failed to verify signature: ${t}`;super({code:Vt.SIGNATURE_VERIFICATION_ERROR,message:e}),this.message=e,this.name="SignatureVerificationError"}},xe=class extends $i{constructor(e,r){super(e);w(this,"hubError");r&&(this.hubError={statusCode:r.status,statusText:r.statusText},typeof r.body=="string"?this.hubError.message=r.body:typeof r.body=="object"&&Object.assign(this.hubError,r.body))}},Ti=class extends xe{constructor(t,e){super({message:t,code:Vt.DOES_NOT_EXIST},e),this.name="DoesNotExist"}},Xu=class extends xe{constructor(t,e){super({message:t,code:Vt.CONFLICT_ERROR},e),this.name="ConflictError"}},Yu=class extends xe{constructor(t,e){super({message:t,code:Vt.NOT_ENOUGH_PROOF_ERROR},e),this.name="NotEnoughProofError"}},Qu=class extends xe{constructor(t,e){super({message:t,code:Vt.BAD_PATH_ERROR},e),this.name="BadPathError"}},th=class extends xe{constructor(t,e){super({message:t,code:Vt.VALIDATION_ERROR},e),this.name="ValidationError"}},In=class extends xe{constructor(e,r,n){super({message:e,code:Vt.PAYLOAD_TOO_LARGE_ERROR},r);w(this,"hubError");w(this,"maxUploadByteSize");this.name="PayloadTooLargeError",this.maxUploadByteSize=n}},eh=class extends xe{constructor(t,e){super({message:t,code:Vt.PRECONDITION_FAILED_ERROR},e),this.name="PreconditionFailedError"}};async function rh(t){let e="",r;try{e=await t.text();try{r=JSON.parse(e)}catch{}}catch(i){console.debug(`Error getting bad http response text: ${i}`)}let n=t.status,s=t.statusText;return{status:n,statusText:s,body:r||e}}function Ci(t){return Number.isFinite(t)?Math.floor(t*1024*1024):0}async function Oi(t,e,r){if(t.ok)throw new Error("Cannot get a Stacks from a valid response.");let n=await rh(t);if(n.status===401)throw new th(e,n);if(n.status===402)throw new Yu(e,n);if(n.status===403)throw new Qu(e,n);if(n.status===404)throw new Ti(e,n);if(n.status===409)throw new Xu(e,n);if(n.status===412)throw new eh(e,n);if(n.status===413){let s=r&&r.max_file_upload_size_megabytes?Ci(r.max_file_upload_size_megabytes):0;throw new In(e,n,s)}else throw new Error(e)}function nh(t){if(!t||!t.hubError||!t.hubError.statusCode)return!1;let e=t.hubError.statusCode;return e===401||e===409||e>=500&&e<=599}async function kn(t){let{filename:e,contents:r,hubConfig:n,contentType:s="application/octet-stream"}=t,i={"Content-Type":s,Authorization:`bearer ${n.token}`},a=await ve(`${n.server}/store/${n.address}/${e}`,{method:"POST",headers:i,body:r});if(!a.ok)throw await Oi(a,"Error when uploading to Gaia hub.",n);let o=await a.text();return JSON.parse(o)}function Ui(t,e){return Promise.resolve(`${e.url_prefix}${e.address}/${t}`)}var Ke=".sig",Pi="https://stacks-node-api.stacks.co/v1/names",Ni=class{constructor(t,e){w(this,"content");w(this,"wasString");w(this,"contentType");w(this,"contentByteLength");w(this,"loadedData");this.wasString=typeof t=="string",this.content=Ni.normalizeContentDataType(t,e),this.contentType=e||this.detectContentType(),this.contentByteLength=this.detectContentLength()}static normalizeContentDataType(t,e){try{if(typeof t=="string"){let r=(e||"").toLowerCase().replace("-","");if(r.includes("charset")&&!r.includes("charset=utf8")&&!r.includes("charset=ascii"))throw new Error(`Unable to determine byte length with charset: ${e}`);return new TextEncoder().encode(t)}else{if(t instanceof Uint8Array)return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(typeof Blob<"u"&&t instanceof Blob)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(Array.isArray(t)){if(t.length>0&&(!Number.isInteger(t[0])||t[0]<0||t[0]>255))throw new Error(`Unexpected array values provided as file data: value "${t[0]}" at index 0 is not an octet number. ${this.supportedTypesMsg}`);return new Uint8Array(t)}else{let r=Object.prototype.toString.call(t);throw new Error(`Unexpected type provided as file data: ${r}. ${this.supportedTypesMsg}`)}}}catch(r){throw console.error(r),new Error(`Error processing data: ${r}`)}}detectContentType(){return this.wasString?"text/plain; charset=utf-8":typeof Blob<"u"&&this.content instanceof Blob&&this.content.type?this.content.type:"application/octet-stream"}detectContentLength(){if(ArrayBuffer.isView(this.content)||this.content instanceof Uint8Array)return this.content.byteLength;if(typeof Blob<"u"&&this.content instanceof Blob)return this.content.size;let t=Object.prototype.toString.call(this.content),e=new Error(`Unexpected type "${t}" while detecting content length`);throw console.error(e),e}async loadContent(){try{if(this.content instanceof Uint8Array)return this.content;if(ArrayBuffer.isView(this.content))return new Uint8Array(this.content.buffer,this.content.byteOffset,this.content.byteLength);if(typeof Blob<"u"&&this.content instanceof Blob){let t=new FileReader;return await new Promise((e,r)=>{t.onerror=n=>{r(n)},t.onload=()=>{let n=t.result;e(new Uint8Array(n))},t.readAsArrayBuffer(this.content)})}else{let t=Object.prototype.toString.call(this.content);throw new Error(`Unexpected type ${t}`)}}catch(t){console.error(t);let e=new Error(`Error loading content: ${t}`);throw console.error(e),e}}load(){return this.loadedData===void 0&&(this.loadedData=this.loadContent()),this.loadedData}},Bi=Ni;Vu(Bi,"supportedTypesMsg","Supported types are: `string` (to be UTF8 encoded), `Uint8Array`, `Blob`, `File`, `ArrayBuffer`, `UInt8Array` or any other typed array buffer. ");async function sh(t,e,r){let{privateKey:n}=r,{encrypt:s,sign:i,gaiaHubConfig:a,cipherTextEncoding:o}=r,{contentType:c=""}=r,u=Ci(a.max_file_upload_size_megabytes),h=u>0,l=new Bi(e,c);if(c=l.contentType,!s&&h&&l.contentByteLength>u){let d=`The max file upload size for this hub is ${u} bytes, the given content is ${l.contentByteLength} bytes`,m=new In(d,null,u);throw console.error(m),m}if(s&&h&&o){let d=Cc({contentLength:l.contentByteLength,wasString:l.wasString,sign:!!i,cipherTextEncoding:o});if(d>u){let m=`The max file upload size for this hub is ${u} bytes, the given content is ${d} bytes after encryption`,g=new In(m,null,u);throw console.error(g),g}}let y;if(!s&&i){let d=await l.load();if(typeof i=="string")n=i;else if(!n)throw Error("Need to pass private key");let m=await un({contents:d,privateKey:n});y=async g=>(await Promise.all([kn({filename:t,contents:d,hubConfig:g,contentType:c}),kn({filename:`${t}${Ke}`,contents:JSON.stringify(m),hubConfig:g,contentType:"application/json"})]))[0].publicURL}else{let d;if(!s&&!i)d=l.content;else{let m;if(typeof s=="string")m=s;else if(typeof i=="string")m=M(kt(i,!0));else if(n)m=M(kt(n,!0));else throw new Error("No private key passed");let g=await l.load(),I=await Qs(g,{publicKey:m,wasString:l.wasString,cipherTextEncoding:o,privateKey:n});if(d=JSON.stringify(I),n){let{signature:C,publicKey:$}=await un({contents:I,privateKey:n});d=JSON.stringify({signature:C,publicKey:$,cipherText:I})}c="application/json"}y=async m=>(await kn({filename:t,contents:d,hubConfig:m,contentType:c})).publicURL}try{return await y(a)}catch(d){if(nh(d))return console.error(d),console.error("Possible recoverable error during Gaia upload, retrying..."),await y(a);throw d}}function ih(t){if(!t.hasOwnProperty("uri")||!Array.isArray(t.uri)||t.uri.length<1)return null;let e=t.uri[0];if(!e.hasOwnProperty("target"))return null;let r=e.target;return r.startsWith("https")||r.startsWith("http")||(r=`https://${r}`),r}function $n(t,e){let r;return e.proof&&e.proof.url&&(r=e.proof.url),{"@type":"Account",service:t,identifier:e.username,proofType:"http",proofUrl:r}}function ah(t){let e={"@type":"Person"};if(t){t.name&&t.name.formatted&&(e.name=t.name.formatted),t.bio&&(e.description=t.bio),t.location&&t.location.formatted&&(e.address={"@type":"PostalAddress",addressLocality:t.location.formatted});let r=[];t.avatar&&t.avatar.url&&r.push({"@type":"ImageObject",name:"avatar",contentUrl:t.avatar.url}),t.cover&&t.cover.url&&r.push({"@type":"ImageObject",name:"cover",contentUrl:t.cover.url}),r.length&&(e.image=r),t.website&&(e.website=[{"@type":"WebSite",url:t.website}]);let n=[];t.bitcoin&&t.bitcoin.address&&n.push({"@type":"Account",role:"payment",service:"bitcoin",identifier:t.bitcoin.address}),t.twitter&&t.twitter.username&&n.push($n("twitter",t.twitter)),t.facebook&&t.facebook.username&&n.push($n("facebook",t.facebook)),t.github&&t.github.username&&n.push($n("github",t.github)),t.auth&&t.auth.length>0&&t.auth[0]&&t.auth[0].publicKeychain&&n.push({"@type":"Account",role:"key",service:"bip32",identifier:t.auth[0].publicKeychain}),t.pgp&&t.pgp.url&&n.push({"@type":"Account",role:"key",service:"pgp",identifier:t.pgp.fingerprint,contentUrl:t.pgp.url}),e.account=n}return e}function oh(t,e){let r=pn(t);if(!r)throw Error("no decoded token");let n=r.payload;if(typeof n=="string")throw new Error("Unexpected token payload type of string");if(n.hasOwnProperty("subject")&&n.subject){if(!n.subject.hasOwnProperty("publicKey"))throw new Error("Token doesn't have a subject public key")}else throw new Error("Token doesn't have a subject");if(n.hasOwnProperty("issuer")&&n.issuer){if(!n.issuer.hasOwnProperty("publicKey"))throw new Error("Token doesn't have an issuer public key")}else throw new Error("Token doesn't have an issuer");if(!n.hasOwnProperty("claim"))throw new Error("Token doesn't have a claim");let s=n.issuer.publicKey,i=cn(s);if(e!==s&&e!==i)throw new Error("Token issuer public key does not match the verifying value");let a=new Wc(r.header.alg,s);if(!a)throw new Error("Invalid token verifier");if(!a.verify(t))throw new Error("Token verification failed");return r}function ch(t,e){let r=e?oh(t,e):pn(t);if(r&&r.hasOwnProperty("payload")){let n=r.payload;if(typeof n=="string")throw new Error("[micro-stacks] extractProfile: Unexpected token payload type of string");if(n.hasOwnProperty("claim"))return n.claim}return{}}async function lh(t,e){let r=Tu(t);if(r.hasOwnProperty("$origin")||(r=null),!(r&&Object.keys(r).length>0))return ah(JSON.parse(t));let n=ih(r);if(n)try{let s=await(await ve(n)).json();return ch(s[0].token,e)}catch(s){throw console.error(`[micro-stacks] resolveZoneFileToProfile: error fetching token file ${n}: ${s}`),s}return console.debug("[micro-stacks] Token file url not found. Resolving to blank profile."),{}}async function uh(t){let{username:e,zoneFileLookupURL:r=Pi}=t;if(!e)return Promise.reject();let n=`${r.replace(/\/$/,"")}/${t.username}`,s=await(await ve(n)).json();if(s.hasOwnProperty("zonefile")&&s.hasOwnProperty("address"))return await lh(s.zonefile,t.verify?s.address:void 0);throw new Error("Invalid zonefile lookup response: did not contain `address` or `zonefile` field")}async function Li(t,e,r,n){let s=await uh({username:e,zoneFileLookupURL:n}),i;if(s)return s.hasOwnProperty("apps")?s.apps.hasOwnProperty(r)&&(i=`${s.apps[r].replace(/\/?(\?|#|$)/,"/$1")}${t}`):s.hasOwnProperty("appsMeta")&&s.appsMeta.hasOwnProperty(r)&&(i=`${s.appsMeta[r].replace(/\/?(\?|#|$)/,"/$1")}${t}`),i}async function hh(t,e){let r;if(e.username?r=await Li(t,e.username,e.app,e.zoneFileLookupURL):r=await Ui(t,e.gaiaHubConfig),r)return r;throw new Error("Missing readURL")}async function _i(t){let{app:e,username:r,zoneFileLookupURL:n,gaiaHubConfig:s}=t,i;r?i=await Li("/",r,e,n):s&&(i=await Ui("/",s));let a=/([13][a-km-zA-HJ-NP-Z0-9]{26,35})/.exec(i);if(!a)throw new Error("Failed to parse gaia address");return a[a.length-1]}async function Tn(t){let{path:e,forceText:r,app:n,username:s,zoneFileLookupURL:i,gaiaHubConfig:a}=t,o=await hh(e,{app:n,username:s,zoneFileLookupURL:i,gaiaHubConfig:a}),c=await ve(o);if(!c.ok)throw await Oi(c,`getFile ${e} failed.`,null);let u=c.headers.get("Content-Type");if(typeof u=="string"&&(u=u.toLowerCase()),r||u===null||u.startsWith("text")||u.startsWith("application/json"))return c.text();{let h=await c.arrayBuffer();return Ft(h)}}async function fh(t,e){let{app:r,username:n,zoneFileLookupURL:s,gaiaHubConfig:i}=e,a=`${t}${Ke}`;try{let[o,c,u]=await Promise.all([Tn({path:t,app:r,username:n,zoneFileLookupURL:s,forceText:!1,gaiaHubConfig:i}),Tn({path:a,app:r,username:n,zoneFileLookupURL:s,forceText:!0,gaiaHubConfig:i}),_i({app:r,username:n,zoneFileLookupURL:s,gaiaHubConfig:i})]);if(!o)return o;if(!u)throw new qt(`Failed to get gaia address for verification of: ${t}`);if(!c||typeof c!="string")throw new qt(`Failed to obtain signature for file: ${t} -- looked in ${t}${Ke}`);let h,l;try{let g=JSON.parse(c);h=g.signature,l=g.publicKey}catch(g){throw g instanceof SyntaxError?new Error(`Failed to parse signature content JSON (path: ${t}${Ke}) The content may be corrupted.`):g}let y=ln(l),d=typeof o=="string"?ct(o):o,m=Xs({signature:h,contents:d,publicKey:l});if(u!==y)throw new qt(`Signer pubkey address (${y}) doesn't match gaia address (${u})`);if(m)return o;throw new qt(`Contents do not match ECDSA signature: path: ${t}, signature: ${t}${Ke}`)}catch(o){throw o instanceof Ti&&o.message.indexOf(a)>=0?new qt(`Failed to obtain signature for file: ${t} -- looked in ${t}${Ke}`):o}}async function dh(t){let{path:e,storedContents:r,app:n,privateKey:s,username:i,zoneFileLookupURL:a,gaiaHubConfig:o}=t,c=s,u=c?kt(c,!0):null,h=null;if(i||o?h=await _i({app:n,username:i,zoneFileLookupURL:a,gaiaHubConfig:o}):u&&(h=ln(u)),!h)throw new qt(`Failed to get gaia address for verification of: ${e}`);let l;try{l=JSON.parse(r)}catch(I){throw I instanceof SyntaxError?new Error("Failed to parse encrypted, signed content JSON. The content may not be encrypted. If using getFile, try passing { verify: false, decrypt: false }."):I}let y=l.signature,d=l.publicKey,m=l.cipherText,g=ln(d);if(!d||!m||!y)throw new qt(`Failed to get signature verification data from file: ${e}`);if(g!==h)throw new qt(`Signer pubkey address (${g}) doesn't match gaia address (${h})`);if(!Xs({signature:y,contents:m,publicKey:d}))throw new qt(`Contents do not match ECDSA signature in file: ${e}`);if(!s)throw Error("Private key needs to be passed in order to decrypt content");return hn(m,{privateKey:s})}async function ph(t,e){let r={decrypt:!0,verify:!1,app:be("location",{returnEmptyObject:!0}).origin,zoneFileLookupURL:Pi,...e};if(r.verify&&!r.decrypt)return fh(t,r);let n=await Tn({path:t,app:r.app,username:r.username,zoneFileLookupURL:r.zoneFileLookupURL,forceText:!!r.decrypt,gaiaHubConfig:r.gaiaHubConfig});if(n===null)return n;if(typeof n!="string")throw new Error("[micro-stacks/storage] Expected to get back a string for the cipherText");let s=!!r.verify,i=!!r.decrypt,a=typeof r.decrypt=="string"?r.decrypt:r.privateKey;if(n.includes("signature")&&n.includes("publicKey")&&(s=!0),n.includes("cipherText")&&n.includes("ephemeralPK")&&(i=!0),!s&&!i)return n;let o=!n.includes("cipherText");if(i&&o)throw new Error(`[micro-stacks/storage] Expected to get back a string that includes cipherText, is it encrypted? got back: ${JSON.stringify(n)}`);if(!a)throw new Error("[micro-stacks/storage] No private key was passed to getFile, a private key needs to be passed if decrypt is set to true");if(!s)return hn(n,{privateKey:a});if(i&&s)return dh({path:t,storedContents:n,app:r.app,privateKey:a,username:r.username,zoneFileLookupURL:r.zoneFileLookupURL,gaiaHubConfig:r.gaiaHubConfig});throw new Error("[micro-stacks/storage] Should be unreachable.")}var gh=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s of e.entries())if(!r.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],r.get(s[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s of e.entries())if(!r.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(e[s]!==r[s])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var a=i[s];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},yh="micro-stacks",Di={getItem:t=>null,setItem:(t,e)=>{},removeItem:t=>{}},Ri=wh({storage:typeof window<"u"?window.localStorage:Di,serialize:JSON.stringify,deserialize:JSON.parse});function wh({storage:t,key:e=yh,serialize:r,deserialize:n}){return{...t,getItem:(s,i=null)=>{let a=`${e}.${s.replace(`${e}.`,"")}`,o=t.getItem(a);if(!n)return o??i;try{return o?n(o):i}catch(c){return console.warn(c),i}},setItem:(s,i)=>{let a=`${e}.${s.replace(`${e}.`,"")}`;if(i===null)t.removeItem(a);else try{let o=r?r(i):i;t.setItem(a,o)}catch(o){console.error(o)}},removeItem:s=>t.removeItem(`${e}.${s}`)}}function Mi(t){return`[@micro-stacks/client] ${t}`}function st(t,e){$u(t,Mi(e))}var mh=(t=>(t.ContractCall="contract_call",t.TokenTransfer="token_transfer",t.ContractDeploy="contract_deploy",t))(mh||{}),bh=(t=>(t.Authentication="status/Authentication",t.TransactionSigning="status/TransactionSigning",t.MessageSigning="status/MessageSigning",t.StructuredMessageSigning="status/StructuredMessageSigning",t))(bh||{}),vh=(t=>(t.IsLoading="status/IsLoading",t.IsIdle="status/IsIdle",t))(vh||{}),Hi="store",Fi=typeof document>"u",Sh=function(t){var e=t.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return e};function Cn(t){if(t&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(t)&&!/%[^0-9a-f]/i.test(t)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(t)){var e=[],r="",n="",s="",i="",a="",o="";if(e=Sh(t),r=e[1],n=e[2],s=e[3],i=e[4],a=e[5],!!(r&&r.length&&s.length>=0)){if(n&&n.length){if(!(s.length===0||/^\//.test(s)))return}else if(/^\/\//.test(s))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase()))return o+=r+":",n&&n.length&&(o+="//"+n),o+=s,i&&i.length&&(o+="?"+i),a&&a.length&&(o+="#"+a),o}}}var Eh="(?<domain>([^?#]*)) wants you to sign in with your Stacks account:",Ah="\\n(?<address>S[A-Z0-9]{40})\\n\\n",xh="((?<statement>[^\\n]+)\\n)?",Ki="(([^:?#]+):)?(([^?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?",Ih=`\\nURI: (?<uri>${Ki}?)`,kh="\\nVersion: (?<version>1)",$h="\\nChain ID: (?<chainId>[0-9]+)",Th="\\nNonce: (?<nonce>[a-zA-Z0-9]{8,})",On="([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))",Ch=`\\nIssued At: (?<issuedAt>${On})`,Oh=`(\\nExpiration Time: (?<expirationTime>${On}))?`,Uh=`(\\nNot Before: (?<notBefore>${On}))?`,Ph="(\\nRequest ID: (?<requestId>[-._~!$&'()*+,;=:@%a-zA-Z0-9]*))?",Nh=`(\\nResources:(?<resources>(\\n- ${Ki}?)+))?`,Bh=`^${Eh}${Ah}${xh}${Ih}${kh}${$h}${Th}${Ch}${Oh}${Uh}${Ph}${Nh}$`,Lh=class{constructor(t){w(this,"domain");w(this,"address");w(this,"statement");w(this,"uri");w(this,"version");w(this,"chainId");w(this,"nonce");w(this,"issuedAt");w(this,"expirationTime");w(this,"notBefore");w(this,"requestId");w(this,"resources");w(this,"match");var e,r,n,s,i,a,o,c,u,h,l,y,d,m;let g=new RegExp(Bh,"g").exec(t);if(!g)throw new Error("Message did not match the regular expression.");if(this.match=g,this.domain=(e=g==null?void 0:g.groups)==null?void 0:e.domain,this.domain.length===0||!/[^#?]*/.test(this.domain))throw new Error("Domain cannot be empty.");if(this.address=(r=g==null?void 0:g.groups)==null?void 0:r.address,!Js(this.address))throw new Error("Invalid address.");if(this.statement=(n=g==null?void 0:g.groups)==null?void 0:n.statement,this.uri=(s=g==null?void 0:g.groups)==null?void 0:s.uri,!Cn(this.uri))throw new Error("Invalid URI.");this.version=(i=g==null?void 0:g.groups)==null?void 0:i.version,this.nonce=(a=g==null?void 0:g.groups)==null?void 0:a.nonce,this.chainId=parseInt((o=g==null?void 0:g.groups)==null?void 0:o.chainId),this.issuedAt=(c=g==null?void 0:g.groups)==null?void 0:c.issuedAt,this.expirationTime=(u=g==null?void 0:g.groups)==null?void 0:u.expirationTime,this.notBefore=(h=g==null?void 0:g.groups)==null?void 0:h.notBefore,this.requestId=(l=g==null?void 0:g.groups)==null?void 0:l.requestId,this.resources=(d=(y=g==null?void 0:g.groups)==null?void 0:y.resources)==null?void 0:d.split(`
- `).slice(1),((m=this.resources)==null?void 0:m.length)>0&&this.resources.forEach(I=>{if(!Cn(I))throw new Error(`${I} is not a valid resource.`)})}},_h=["signature","domain","nonce","time"],Et=class{constructor(t,e,r){w(this,"type");w(this,"expected");w(this,"received");this.type=t,this.expected=e,this.received=r}},Dh=class{constructor(t){w(this,"domain");w(this,"address");w(this,"statement");w(this,"uri");w(this,"version");w(this,"chainId");w(this,"nonce");w(this,"issuedAt");w(this,"expirationTime");w(this,"notBefore");w(this,"requestId");w(this,"resources");typeof t=="string"&&(t=new Lh(t)),this.domain=t.domain,this.address=t.address,this.statement=t.statement,this.uri=t.uri,this.version=t.version,this.nonce=t.nonce,this.issuedAt=t.issuedAt,this.expirationTime=t.expirationTime,this.notBefore=t.notBefore,this.requestId=t.requestId,this.chainId=t.chainId,this.resources=t.resources,typeof this.chainId=="string"&&(this.chainId=parseInt(this.chainId)),this.validateMessage()}toMessage(){this.validateMessage();let t=`${this.domain} wants you to sign in with your Stacks account:`,e=`URI: ${this.uri}`,r=[t,this.address].join(`
`),n=`Version: ${this.version}`,s="Chain ID: "+this.chainId||"1",i=`Nonce: ${this.nonce}`,a=[e,n,s,i];if(this.issuedAt&&Date.parse(this.issuedAt),this.issuedAt=this.issuedAt?this.issuedAt:new Date().toISOString(),a.push(`Issued At: ${this.issuedAt}`),this.expirationTime){let c=`Expiration Time: ${this.expirationTime}`;a.push(c)}this.notBefore&&a.push(`Not Before: ${this.notBefore}`),this.requestId&&a.push(`Request ID: ${this.requestId}`),this.resources&&a.push(["Resources:",...this.resources.map(c=>`- ${c}`)].join(`
`));let o=a.join(`
`);return r=[r,this.statement].join(`

`),this.statement&&(r+=`
`),[r,o].join(`
`)}prepareMessage(){let t;switch(this.version){case"1":{t=this.toMessage();break}default:{t=this.toMessage();break}}return t}async verify(t){return new Promise(async(e,r)=>{Object.keys(t).forEach(l=>{_h.includes(l)||r({success:!1,data:this,error:new Error(`${l} is not a valid key for VerifyParams.`)})});let n=l=>{r(l)},{signature:s,domain:i,nonce:a,time:o}=t;i&&i!==this.domain&&n({success:!1,data:this,error:new Et("Domain do not match provided domain for verification.",i,this.domain)}),a&&a!==this.nonce&&n({success:!1,data:this,error:new Et("Nonce do not match provided nonce for verification.",a,this.nonce)});let c=new Date(o||new Date);if(this.expirationTime){let l=new Date(this.expirationTime);c.getTime()>=l.getTime()&&n({success:!1,data:this,error:new Et("Expired message.",`${c.toISOString()} < ${l.toISOString()}`,`${c.toISOString()} >= ${l.toISOString()}`)})}if(this.notBefore){let l=new Date(this.notBefore);c.getTime()<l.getTime()&&n({success:!1,data:this,error:new Et("Message is not valid yet.",`${c.toISOString()} >= ${l.toISOString()}`,`${c.toISOString()} < ${l.toISOString()}`)})}let u;try{u=this.prepareMessage()}catch(l){n({success:!1,data:this,error:l});return}let h;try{let l=Ei(u),y=xi({signature:s}),d=Ai({hash:l,signature:y.signature,recoveryBytes:y.recoveryBytes});vu({signature:s,message:l})&&(h=cn(d,ir(this.address)[0]))}catch{}finally{h!==this.address&&n({success:!1,data:this,error:new Et("Signature do not match address of the message.",h,`Resolved address to be ${this.address}`)})}e({success:!0,data:this})})}validateMessage(...t){var e;if(t.length>0)throw new Et("Unable to parse the message.","Unexpected argument in the validateMessage function.");if(!this.domain||this.domain.length===0||!/[^#?]*/.test(this.domain))throw new Et("Invalid domain.",`${this.domain} to be a valid domain.`);if(!Js(this.address))throw new Et("Invalid address.",`${this.address} to be a valid address.`);if(!Cn(this.uri))throw new Et("URI does not conform to RFC 3986.",`${this.uri} to be a valid uri.`);if(this.version!=="1")throw new Et("Invalid message version.","1",this.version);let r=(e=this==null?void 0:this.nonce)==null?void 0:e.match(/[a-zA-Z0-9]{8,}/);if(!r||this.nonce.length<8||r[0]!==this.nonce)throw new Et("Nonce size smaller then 8 characters or is not alphanumeric.",`Length > 8 (${r==null?void 0:r.length}). Alphanumeric.`,this.nonce);let n=/([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(([Zz])|([+|\-]([01][0-9]|2[0-3]):[0-5][0-9]))/;if(this.issuedAt&&!n.test(this.issuedAt))throw new Error("Invalid time format.");if(this.expirationTime&&!n.test(this.expirationTime))throw new Error("Invalid time format.");if(this.notBefore&&!n.test(this.notBefore))throw new Error("Invalid time format.")}},lr=1;function ji({state:t,version:e}){var r,n,s;return JSON.stringify([[(r=t.network)==null?void 0:r.chainId,(s=(n=t.network)==null?void 0:n.getCoreApiUrl)==null?void 0:s.call(n)],[t.currentAccountIndex,t.accounts.map(i=>({appPrivateKey:i.appPrivateKey,address:sr(i.address[0],tt(i.address[1])),profile_url:i.profile_url}))],e])}function Rh(t){let e=JSON.parse(t),[r,n]=e[0],[s,i]=e[1],a=e[2]??lr;return{network:r===ee.Mainnet?new ue({url:n}):new or({url:n}),currentAccountIndex:s,accounts:i.map(o=>{let[c,u]=ir(o.address);return{appPrivateKey:o.appPrivateKey,address:[c,M(u)],profile_url:o.profile_url}}),version:a}}var zi=t=>{if(t){if(typeof t!="string")return t;if(t==="testnet")return new or}return new ue},Un=({network:t=new ue,...e})=>({statuses:{["status/Authentication"]:"status/IsIdle",["status/TransactionSigning"]:"status/IsIdle",["status/MessageSigning"]:"status/IsIdle",["status/StructuredMessageSigning"]:"status/IsIdle"},network:zi(t),appName:e.appName,appIconUrl:e.appIconUrl,accounts:[],currentAccountIndex:0,onPersistState:e.onPersistState,onAuthentication:e.onAuthentication,onNoWalletFound:e.onNoWalletFound,onSignOut:e.onSignOut}),Pn=(t,e)=>{try{let{version:r,...n}=Rh(t);return{state:{...Un(e),...n},version:r}}catch{return{state:Un(e),version:lr}}},Mh=()=>{if(!be("localStorage",{throwIfUnavailable:!1}))return;let t=localStorage.getItem("MICRO_STACKS_DEBUG");if(t)return JSON.parse(t)},Hh=class{constructor(t={}){w(this,"config");w(this,"storage");w(this,"store");w(this,"debug");w(this,"fetcher");w(this,"getState",()=>this.store.getState());w(this,"onStorageUpdate",t=>{if(typeof document<"u"){let e=window.location.host,r=new URL(t.url).host,n=e===r,s=t.key==="micro-stacks.store";if(n&&s){let i=t.newValue;this.hydrate(JSON.parse(i))}}});w(this,"tabSyncSubscription",t=>{let e=typeof document<"u";return e&&t&&window.addEventListener("storage",this.onStorageUpdate),()=>{e&&t&&window.removeEventListener("storage",this.onStorageUpdate)}});w(this,"onPersistState",t=>{var e,r;return(r=(e=this.store.getState())==null?void 0:e.onPersistState)==null?void 0:r.call(e,t)});w(this,"setOnPersistState",t=>{this.setState(e=>({...e,onPersistState:t})),this.config.onPersistState=t});w(this,"setOnNoWalletFound",t=>{this.setState(e=>({...e,onNoWalletFound:t})),this.config.onPersistState=t});w(this,"setOnSignOut",t=>{this.setState(e=>({...e,onSignOut:t})),this.config.onSignOut=t});w(this,"setOnAuthentication",t=>{this.setState(e=>({...e,onAuthentication:t})),this.config.onAuthentication=t});w(this,"persist",async()=>{if(this.onPersistState){let t=this.dehydrate(this.store.getState());await this.onPersistState(t)}});w(this,"selectHasSession",t=>Boolean(t.accounts.length));w(this,"selectAccounts",t=>t.accounts);w(this,"selectAccount",t=>this.selectHasSession(t)?t.accounts[t.currentAccountIndex]:void 0);w(this,"selectNetwork",t=>this.config.enableNetworkSwitching?t.network:zi(this.config.network));w(this,"selectNetworkChain",t=>this.selectNetwork(t).chainId===ee.Mainnet?"mainnet":"testnet");w(this,"selectTestnetStxAddress",t=>{let e=this.selectAccount(t);return e?sr(e.address[0]===Ar.mainnetP2SH?Ar.testnetP2SH:Ar.testnetP2PKH,tt(e.address[1])):void 0});w(this,"selectMainnetStxAddress",t=>{let e=this.selectAccount(t);return e?sr(e.address[0],tt(e.address[1])):void 0});w(this,"selectStxAddress",t=>this.selectNetworkChain(t)==="mainnet"?this.selectMainnetStxAddress(t):this.selectTestnetStxAddress(t));w(this,"selectAppDetails",t=>t.appName&&t.appIconUrl?{name:t.appName,icon:t.appIconUrl}:void 0);w(this,"selectIdentityAddress",t=>{let e=this.selectAccount(t);return e!=null&&e.appPrivateKey?Gs(e.appPrivateKey):void 0});w(this,"selectDecentralizedID",t=>{let e=this.selectIdentityAddress(t);return e?`did:btc-addr:${e}`:void 0});w(this,"selectStatuses",t=>t.statuses);w(this,"statuses",()=>this.selectStatuses(this.getState()));w(this,"isSignMessageRequestPending",()=>this.statuses()["status/MessageSigning"]);w(this,"isSignStructuredMessageRequestPending",()=>this.statuses()["status/StructuredMessageSigning"]);w(this,"authenticate",async t=>{if(!this.handleNoStacksProviderFound())return;let e=this.selectAppDetails(this.getState());st(e,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config.");let r=this.selectAccounts(this.getState());this.setIsRequestPending("status/Authentication"),await Yl({appDetails:e,onFinish:async({profile:n,...s})=>{var i,a;let[o,c]=ir(s.addresses.mainnet),u=[o,M(c)];r.find(h=>h.address===u)?this.setState(h=>({...h,currentAccountIndex:r.findIndex(l=>l.address===u)})):this.setState(h=>{var l;return{...h,accounts:h.accounts.concat({address:u,appPrivateKey:(l=this.debug)!=null&&l.disableAppPrivateKey?void 0:s.appPrivateKey,decentralizedID:s.decentralizedID,profile_url:s.profile_url}),currentAccountIndex:h.accounts.length}}),(i=t==null?void 0:t.onFinish)==null||i.call(t,s),(a=this.onAuthentication)==null||a.call(this,{profile:n,...s}),await this.persist(),this.setIsIdle("status/Authentication")},onCancel:n=>{var s;this.setIsIdle("status/Authentication"),(s=t==null?void 0:t.onCancel)==null||s.call(t,n)}},Di)});w(this,"signOut",async t=>{var e,r,n,s;return(n=(r=(e=this.store)==null?void 0:e.persist)==null?void 0:r.clearStorage)==null||n.call(r),(s=this.onSignOut)==null||s.call(this),this.resetState(),t==null?void 0:t()});w(this,"getSignInMessage",({domain:t,nonce:e,version:r="1.0.0"})=>{if(!this.handleNoStacksProviderFound())return;let n=this.getState(),s=this.selectAppDetails(n),i=this.selectStxAddress(n);st(s,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),st(i,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in.");let a=be("document",{throwIfUnavailable:!1})?window.location.origin:"";return new Dh({domain:s.name,address:i,statement:"Sign in with Stacks",uri:t??a,version:r,chainId:ee.Mainnet,nonce:e})});w(this,"signTransaction",async(t,e)=>{if(!this.handleNoStacksProviderFound())return;let r=this.getState(),n=this.selectAppDetails(r),s=this.selectStxAddress(r),i=this.selectAccount(r),a=this.selectNetwork(r);st(n,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),st(s,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in."),st(i,"There is not current user session available. Please make sure the user has signed in before attempting this action."),this.setIsRequestPending("status/TransactionSigning");let o,c={privateKey:i.appPrivateKey,appDetails:n,stxAddress:s,network:a,postConditionMode:e.postConditionMode,postConditions:e.postConditions,attachment:e.attachment,sponsored:e.sponsored},u=await(t==="token_transfer"?Wl:t==="contract_call"?ql:Zl)({...c,...e});return st(u,"Transaction JWT could not be created"),await nu({token:u,onFinish:h=>{var l;o=h,(l=e==null?void 0:e.onFinish)==null||l.call(e,h),this.setIsIdle("status/TransactionSigning")},onCancel:h=>{var l;(l=e==null?void 0:e.onCancel)==null||l.call(e,h),this.setIsIdle("status/TransactionSigning")}}),o});w(this,"signMessage",async t=>{if(!this.handleNoStacksProviderFound())return;let e=this.getState(),r=this.selectAppDetails(e),n=this.selectStxAddress(e),s=this.selectAccount(e),i=this.selectNetwork(e);st(r,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),st(n,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in."),st(s,"There is not current user session available. Please make sure the user has signed in before attempting this action."),st(t.message,"No message found -- a message is required when requesting a message signature."),this.setIsRequestPending("status/MessageSigning");let a;return await cu({appDetails:r,privateKey:s.appPrivateKey,stxAddress:n,network:i,message:t.message,onFinish:o=>{var c;a=o,(c=t==null?void 0:t.onFinish)==null||c.call(t,o),this.setIsIdle("status/MessageSigning")},onCancel:o=>{var c;(c=t==null?void 0:t.onCancel)==null||c.call(t,o),this.setIsIdle("status/MessageSigning")}}),a});w(this,"signStructuredMessage",async t=>{var e,r,n;if(!this.handleNoStacksProviderFound())return;let s=this.getState(),i=this.selectAppDetails(s),a=this.selectStxAddress(s),o=this.selectAccount(s),c=this.selectNetwork(s);st(i,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),st(a,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in."),st(o,"There is not current user session available. Please make sure the user has signed in before attempting this action."),st(t.message,"No message found -- a message is required when requesting a message signature."),this.setIsRequestPending("status/StructuredMessageSigning");let u;return await hu({appDetails:i,privateKey:o.appPrivateKey,stxAddress:a,network:c,domain:{name:((e=t.domain)==null?void 0:e.name)??i.name,version:((r=t.domain)==null?void 0:r.version)??"1.0.0",chainId:((n=t.domain)==null?void 0:n.chainId)??c.chainId},message:t.message,onFinish:h=>{var l;u=h,(l=t==null?void 0:t.onFinish)==null||l.call(t,h),this.setIsIdle("status/StructuredMessageSigning")},onCancel:h=>{var l;(l=t==null?void 0:t.onCancel)==null||l.call(t,h),this.setIsIdle("status/StructuredMessageSigning")}}),u});w(this,"setNetwork",t=>{if(!this.config.enableNetworkSwitching)throw new Error(Mi("Network switching is currently disabled. Set `enableNetworkSwitching` to `true` to enable."));typeof t=="string"?this.setState(e=>({...e,network:t==="mainnet"?new ue:new or})):this.setState(e=>({...e,network:t})),this.persist()});w(this,"putFile",(t,e,{encrypt:r=!0,sign:n})=>{let s=this.selectHasSession(this.getState()),i=this.selectGaiaHubConfig(this.getState()),a=this.selectAccount(this.getState());if(!s){console.warn("There is not current user session available. Please make sure the user has signed in before attempting this action.");return}if(!(a!=null&&a.appPrivateKey)||!i){console.warn("The current user session has no `appPrivateKey` defined. Certain actions require an `appPrivateKey`, such as using gaia or encryption.");return}return sh(t,e,{privateKey:a.appPrivateKey,gaiaHubConfig:i,encrypt:r,sign:n,wasString:typeof e=="string"})});w(this,"getFile",(t,{decrypt:e=!0,verify:r})=>{let n=this.selectHasSession(this.getState()),s=this.selectGaiaHubConfig(this.getState()),i=this.selectAccount(this.getState());if(!n){console.warn("There is not current user session available. Please make sure the user has signed in before attempting this action.");return}if(!(i!=null&&i.appPrivateKey)||!s){console.warn("The current user session has no `appPrivateKey` defined. Certain actions require an `appPrivateKey`, such as using gaia or encryption.");return}return ph(t,{privateKey:i.appPrivateKey,gaiaHubConfig:s,decrypt:e,verify:r})});let e={storage:(t==null?void 0:t.storage)??Ri,network:(t==null?void 0:t.network)??new ue,...t},r=typeof e.dehydratedState=="function"?e.dehydratedState(this.storeKey):e.dehydratedState,n=r?Pn(r,e):{state:Un(e),version:lr};this.store=Su(Au(Iu(()=>n.state,{name:Hi,getStorage:()=>e.storage,version:n.version,serialize:({state:s,version:i})=>ji({state:s,version:i??lr}),deserialize:s=>Pn(s,e)}))),this.debug=Mh(),this.config=e,this.storage=e.storage,this.fetcher=e.fetcher||ve}setState(t){let e=typeof t=="function"?t(this.store.getState()):t;this.store.setState(e,!0)}resetState(){this.setState(t=>({...t,accounts:[],currentAccountIndex:0}))}get subscribe(){return this.store.subscribe}getStacksProvider(){return be("StacksProvider",{throwIfUnavailable:!1})}subscribeToStacksProvider(t,e=100){if(this.getStacksProvider())return t(),()=>{};{let r=setInterval(()=>{this.getStacksProvider()&&(t(),clearInterval(r))},e);return()=>{typeof r<"u"&&clearInterval(r)}}}get storeKey(){return Hi}get onAuthentication(){var t;return(t=this.store.getState())==null?void 0:t.onAuthentication}get onNoWalletFound(){var t;return(t=this.store.getState())==null?void 0:t.onNoWalletFound}get onSignOut(){var t;return(t=this.store.getState())==null?void 0:t.onSignOut}dehydrate(t){return ji({state:t??this.store.getState(),version:lr})}hydrate(t){let e=Pn(t,this.config);this.setState(e.state)}setStatus(t,e){this.setState(r=>({...r,statuses:{...r.statuses,[t]:e}}))}setIsRequestPending(t){this.setStatus(t,"status/IsLoading")}setIsIdle(t){this.setStatus(t,"status/IsIdle")}handleNoStacksProviderFound(){return typeof this.getStacksProvider()>"u"?typeof this.onNoWalletFound<"u"?(this.onNoWalletFound(),!1):(st(this.getStacksProvider(),"The injected `StacksProvider` cannot be found. This is typically because there is no Stacks wallet available, such as the Hiro web wallet extension or the iOS/Android wallet Xverse."),!1):!0}selectGaiaHubConfig(t){let e=this.selectHasSession(t),r=this.selectAccount(t);if(!(!e||!(r!=null&&r.appPrivateKey)))return Gu({gaiaHubUrl:"https://hub.blockstack.org",privateKey:r.appPrivateKey})}async fetchBNSName(){var t;let e=this.selectStxAddress(this.getState()),r=this.selectNetwork(this.getState());if(!e){console.warn("No Stacks address found while trying to fetch BNS name");return}let n=r.getCoreApiUrl()+`/v1/addresses/stacks/${e}`;try{let s=await(await this.fetcher(n)).json();return(t=s==null?void 0:s.names)==null?void 0:t[0]}catch(s){console.log("[@micro-stacks/client] fetchBNSName failed",s)}}async fetchZoneFile(){try{let t=this.selectStxAddress(this.getState()),e=this.selectNetwork(this.getState());if(!t){console.warn("No Stacks address found while trying to fetch zonefile name");return}let r=e.getCoreApiUrl()+`/v1/names/${t}/zonefile`;return await(await this.fetcher(r)).json()}catch(t){console.log("[@micro-stacks/client] fetchZoneFile failed",t)}}async fetchProfile(){let t=this.selectAccount(this.getState());if(t!=null&&t.profile_url)try{return await(await this.fetcher(t.profile_url)).json()}catch(e){console.log("[@micro-stacks/client] fetchProfile failed",e)}}encrypt(t,e={}){var r;if(e!=null&&e.publicKey&&(e!=null&&e.privateKey))throw Error("Error: do not pass both `publicKey` and `privateKey` to client.encrypt");return Qs(t,{...e,privateKey:e.privateKey??((r=this.selectAccount(this.getState()))==null?void 0:r.appPrivateKey)})}decrypt(t,e){var r;let n=e.privateKey??((r=this.selectAccount(this.getState()))==null?void 0:r.appPrivateKey);if(!n)throw Error("You must pass a `privateKey` value to client.decrypt");return hn(t,{privateKey:n})}},Nn;function Bn(t){let e=(t==null?void 0:t.client)??new Hh(t==null?void 0:t.config);return Fi?e:(Nn=e,Nn)}function Fh(t){return Fi?Bn(t):Nn??Bn(t)}var Kh=({client:t,state:e})=>t.selectNetwork(e||t.getState()),jh=(t,e=Fh())=>e.subscribe(e.selectNetwork,t,{equalityFn:gh}),Vi="micro-stacks-client-context",qi=({appName:t,appIconUrl:e,storage:r=Ri,network:n,dehydratedState:s,onPersistState:i,onSignOut:a,onAuthentication:o,onNoWalletFound:c,fetcher:u})=>{ef(Vi,Bn({config:{appName:t,appIconUrl:e,storage:r,network:n,dehydratedState:s,onPersistState:i,onSignOut:a,onAuthentication:o,onNoWalletFound:c,fetcher:u}}))},zh="No MicroStacksClient set, mount the client in your app by wrapping your app in `ClientProvider` or using `mountClient`",Or=()=>{let t=rf(Vi);if(!t)throw new Error(zh);return t};function Vh(t,e){return()=>{let r=Or();return sf(t({client:r}),n=>e(n,r))}}var qh=Vh(Kh,jh);function Zh(){let t=Or(),e=r=>(r.isMainnet=()=>r.chainId===ee.Mainnet,{setNetwork:t.setNetwork,network:r,isMainnet:r.isMainnet()});return nf([qh()],([r])=>e(r))}const Zi=af({}),{console:Wh}=Ha,Jh="src/routes/+layout.svelte";function Ln(t){let e,r,n,s,i,a;r=new fi({$$inline:!0});const o=t[2].default,c=of(o,t,t[1],null);i=new wi({$$inline:!0});const u={c:function(){e=b("div"),es(r.$$.fragment),n=P(),c&&c.c(),s=P(),es(i.$$.fragment),this.h()},l:function(h){e=v(h,"DIV",{class:!0});var l=A(e);rs(r.$$.fragment,l),n=N(l),c&&c.l(l),s=N(l),rs(i.$$.fragment,l),l.forEach(S),this.h()},h:function(){f(e,"class","app s-7IPF32Wcq3s8"),E(e,Jh,56,0,2049)},m:function(h,l){fr(h,e,l),ns(r,e,null),p(e,n),c&&c.m(e,null),p(e,s),ns(i,e,null),a=!0},p:function(h,l){c&&c.p&&(!a||l&2)&&lf(c,o,h,h[1],a?hf(o,h[1],l,null):uf(h[1]),null)},i:function(h){a||(Le(r.$$.fragment,h),Le(c,h),Le(i.$$.fragment,h),a=!0)},o:function(h){Ze(r.$$.fragment,h),Ze(c,h),Ze(i.$$.fragment,h),a=!1},d:function(h){h&&S(e),ss(r),c&&c.d(h),ss(i)}};return Qt("SvelteRegisterBlock",{block:u,id:Ln.name,type:"if",source:"(56:0) {#if inited}",ctx:t}),u}function _n(t){let e,r,n=t[0]&&Ln(t);const s={c:function(){n&&n.c(),e=Va()},l:function(i){n&&n.l(i),e=Va()},m:function(i,a){n&&n.m(i,a),fr(i,e,a),r=!0},p:function(i,[a]){i[0]?n?(n.p(i,a),a&1&&Le(n,1)):(n=Ln(i),n.c(),Le(n,1),n.m(e.parentNode,e)):n&&(ff(),Ze(n,1,1,()=>{n=null}),cf())},i:function(i){r||(Le(n),r=!0)},o:function(i){Ze(n),r=!1},d:function(i){n&&n.d(i),i&&S(e)}};return Qt("SvelteRegisterBlock",{block:s,id:_n.name,type:"component",source:"",ctx:t}),s}function Gh(t,e,r){let n;Ra(Mt,"sbtcConfig"),Ma(t,Mt,d=>r(5,n=d));let{$$slots:s={},$$scope:i}=e;_r("Layout",s,["default"]);const a=Mt.subscribe(d=>{});Dr(a);let o=!1,c={}.VITE_ORIGIN;typeof window<"u"&&(c=window.location.origin);const u={appName:"sBTC Client",appIconUrl:c+"/img/logo.png",network:n.network==="mainnet"?new ue:new or};qi(u),Zi.set(Or());const h=async()=>{const d=await Tr(n.network),m=n;m.sbtcWalletAddress=d,Mt.update(()=>m)};let l;qa(async()=>{l=await Qh(()=>import("../../chunks/bootstrap.esm-9341ea80.js"),[],import.meta.url);try{h()}catch(d){console.log(d)}await Za(),setTimeout(function(){const d=window.document.querySelectorAll('[data-bs-toggle="tooltip"]');d&&[...d].map(g=>new l.Tooltip(g));const m=window.document.querySelectorAll('[data-bs-toggle="dropdown"]');m&&[...m].map(g=>new l.Dropdown(g)),r(0,o=!0)},1e3)});const y=[];return Object.keys(e).forEach(d=>{!~y.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&Wh.warn(`<Layout> was created with unknown prop '${d}'`)}),t.$$set=d=>{"$$scope"in d&&r(1,i=d.$$scope)},t.$capture_state=()=>({tick:Za,onMount:qa,onDestroy:Dr,Header:fi,Footer:wi,getNetwork:Zh,mountClient:qi,getMicroStacksClient:Or,client:Zi,fetchSbtcWalletAddress:Tr,sbtcConfig:Mt,StacksTestnet:or,StacksMainnet:ue,unsubscribe:a,inited:o,origin:c,config:u,fetchWalletAddress:h,bootstrap:l,$sbtcConfig:n}),t.$inject_state=d=>{"inited"in d&&r(0,o=d.inited),"origin"in d&&(c=d.origin),"bootstrap"in d&&(l=d.bootstrap)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[o,i,s]}Wa=class extends Nr{constructor(e){super(e),Br(this,e,Gh,_n,Lr,{}),Qt("SvelteRegisterComponent",{component:this,tagName:"Layout",options:e,id:_n.name})}}})();export{pf as __tla,Wa as default};
